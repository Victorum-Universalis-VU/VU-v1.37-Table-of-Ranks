#VU - Updated by San Felipe for v1.36.2.*
#Victorum Universalis Note -
#There is no way to modify this carefully overriding parts of it.
#File has been documented well and organised to the best of our abilities. Any submods or addons desiring to add their own entries will need to manually update this entirely
#after every VU update. This is out of our hands and there are no suggestions for this.
#Furthermore, this file contains new entries throughout various sections and should not crash the game if said entries have been entered and linked correctly with respective files.
#Many thanks to you all - San Felipe.
# Do not change tags in here without changing every other reference to them.
# If adding new buildings, make sure they are uniquely named.
# cost = x #==> cost in $ to build (subject to other modifiers)
# time = x #==> number of months to build.
# modifier = m # a modifier on the province that the building gives
# trigger = t # an and trigger that needs to be fullfilled to build and keep the building
# one_per_country = yes/no # if yes, only one of these can exist in a country
# manufactory = { trade_good trade_good } # list of trade goods that get a production bonus
# onmap = yes/no # show as a sprite on the map
# FROM = owner
# ROOT = province
# Building AI is now mainly hard-coded. The AI will estimate how much it gains yearly from each building,
# convert the value to ducats, and take the building with biggest yearly return as a percentage of the build cost.
# If lower than 1%, the AI will not consider the yearly return worth it.
# It will also require higher yearly return if the economy in not in prime shape.
# Forts' value also get converted to a yearly return based on terrain and strategic position, as well as available budget for fort maintenance.
# AI can still be modded though; it will multiply the yearly return with the value of ai_will_do.
# If you don't want the AI to build a building at all, make ai_will_do become 0.
# AI will consider each building to be worth 0.01 ducats per year as a base, so making ai_will_do above cost will have them build it at some point.
# It will still check whether it can afford a building before doing so though, but may save up to it.
#
############################################################
# All of AI has been re-done by DonBrom for the VU project #
############################################################
#
################################################
### PRODUCTION
#Tier 1 Production - Workshop
workshop = {
	cost = 100	#VU - Kept at 150 to 200 in v1.36.2.* by San Felipe
	time = 12
	#Returned price to 100 due to the production efficiency increase.
	modifier = {
		local_production_efficiency = 0.5
		trade_goods_size = 0.1		#Don
		#VU 2.0 Debufs
		local_warscore_cost_modifier = 0.1
		local_core_creation = 0.025
		#VU 3.0
		local_governing_cost_increase = 5
	}
	on_built = {
		#VU 3.0
		add_base_production = 1
	}
	on_destroyed = {
		#VU 3.0
		add_base_production = -1
	}
	on_obsolete = {
	}
	allow_in_gold_provinces = no
	ai_will_do = {
		factor = 1
		################################
		## Don's New Super-Economy AI ##
		################################
		modifier = {
			factor = 0
			OR = {
				#Never do when...
				FROM = {
					vu_don_economy_ai_never_do_when = yes
				}
				#Never build in...
				vu_don_economy_ai_never_build_in = yes
			}
		}
		#Don note - both Avoids are separate, as they are supposed to stack...
		#Avoid doing when...
		modifier = {
			factor = 0.25
			FROM = {
				vu_don_economy_ai_avoid_doing_when = yes
			}
		}
		#Avoid building in...
		modifier = {
			factor = 0.25
			vu_don_economy_ai_avoid_building_in = yes
		}
	}
}

#Tier 2 Production - Counting House
counting_house = {
	cost = 200	#VU - Kept at 400 in v1.36.2.* by San Felipe
	time = 24
	#VU AddOn price changed from 400 to 200. Part of the comprehensive balance overhaul to adjust buildings to the VU map (with all its new provinces).
	#VU AddOn time changed from 12 to 24. Doubling upgraded buildings' build time.
	make_obsolete = workshop
	modifier = {
		local_production_efficiency = 1
		trade_goods_size = 0.2		#Don
		#VU 2.0 Debufs
		local_warscore_cost_modifier = 0.15
		local_core_creation = 0.03
		#VU 3.0
		local_governing_cost_increase = 10
	}
	on_built = {
		#VU 3.0
		add_base_production = 2
	}
	on_destroyed = {
		#VU 3.0
		add_base_production = -2
	}
	on_obsolete = {
	}
	allow_in_gold_provinces = no
	ai_will_do = {
		factor = 1
		################################
		## Don's New Super-Economy AI ##
		################################
		modifier = {
			factor = 0
			OR = {
				#Never do when...
				FROM = {
					vu_don_economy_ai_never_do_when = yes
				}
				#Never build in...
				vu_don_economy_ai_never_build_in = yes
			}
		}
		#Don note - both Avoids are separate, as they are supposed to stack...
		#Avoid doing when...
		modifier = {
			factor = 0.25
			FROM = {
				vu_don_economy_ai_avoid_doing_when = yes
			}
		}
		#Avoid building in...
		modifier = {
			factor = 0.25
			vu_don_economy_ai_avoid_building_in = yes
		}
	}
}

#Tier 3 Production - Factory
factory = {
	cost = 300	#VU - Kept at 800 in v1.36.2.* by San Felipe
	time = 48
	#Factories are expensive and take a long time to build because they're the last tier of the production category and are quite powerful (as they should be).
	make_obsolete = counting_house
	modifier = {
		local_production_efficiency = 1.5
		trade_goods_size = 0.3		#Don
		#VU 2.0 Debufs
		local_warscore_cost_modifier = 0.2
		local_core_creation = 0.05
		#VU 3.0
		local_governing_cost_increase = 15
	}
	build_trigger = {
		is_state = yes
		NOT = {
			any_province_in_state = {
				OR = {
					has_building = counting_house
					has_building = factory
					has_construction = counting_house
					has_construction = factory
				}
			}
		}
	}
	keep_trigger = {
		calc_true_if = {
			amount = 1
			all_province_in_state = {
				OR = {
					has_building = counting_house
					has_building = factory
					has_construction = counting_house
					has_construction = factory
				}
			}
		}
		NOT = {
			calc_true_if = {
				amount = 2
				all_province_in_state = {
					OR = {
						has_building = counting_house
						has_building = factory
						has_construction = counting_house
						has_construction = factory
					}
				}
			}
		}
	}
	on_built = {
		#VU 3.0
		add_base_production = 3
	}
	on_destroyed = {
		#VU 3.0
		add_base_production = -3
	}
	on_obsolete = {
	}
	allow_in_gold_provinces = no
	ai_will_do = {
		factor = 1
		################################
		## Don's New Super-Economy AI ##
		################################
		modifier = {
			factor = 0
			OR = {
				#Never do when...
				FROM = {
					vu_don_economy_ai_never_do_when = yes
				}
				#Never build in...
				vu_don_economy_ai_never_build_in = yes
			}
		}
		#Don note - both Avoids are separate, as they are supposed to stack...
		#Avoid doing when...
		modifier = {
			factor = 0.25
			FROM = {
				vu_don_economy_ai_avoid_doing_when = yes
			}
		}
		#Avoid building in...
		modifier = {
			factor = 0.25
			vu_don_economy_ai_avoid_building_in = yes
		}
	}
}

################################################
### TRADE
#Tier 1 Trade - Marketplace
marketplace = {
	cost = 100	#VU - Increased from 100 to 200 in v1.36.2.* by San Felipe
	time = 12
	modifier = {
		province_trade_power_modifier = 0.5
		trade_value = 0.25		#Don
		#VU 2.0 Debufs
		local_warscore_cost_modifier = 0.1
		local_core_creation = 0.05
		#VU 3.0
		local_governing_cost_increase = 5
	}
	build_trigger = {
		is_state = yes
		province_has_center_of_trade_of_level = 1
	}
	on_built = {
		#VU 3.0
		add_base_production = 1
	}
	on_destroyed = {
		#VU 3.0
		add_base_production = -1
	}
	on_construction_started = {
	}
	#Fires when you start the construction,  ROOT - Province FROM - Country that started
	on_construction_canceled = {
	}
	#Fires when you cancel the construction, ROOT - Province FROM - Country that canceled
	on_obsolete = {
	}
	ai_will_do = {
		factor = 1
		################################
		## Don's New Super-Economy AI ##
		################################
		modifier = {
			factor = 0
			OR = {
				#Never do when...
				FROM = {
					vu_don_economy_ai_never_do_when = yes
				}
				#Never build in...
				vu_don_economy_ai_never_build_in = yes
			}
		}
		#Don note - both Avoids are separate, as they are supposed to stack...
		#Avoid doing when...
		modifier = {
			factor = 0.25
			FROM = {
				vu_don_economy_ai_avoid_doing_when = yes
			}
		}
		#Avoid building in...
		modifier = {
			factor = 0.25
			vu_don_economy_ai_avoid_building_in = yes
		}
		#############################
		## Trade buildings specific #
		#############################
		#Build in trade related provinces...
		modifier = {
			factor = 5
			vu_don_economy_ai_trade_in = yes
		}
	}
}

#Tier 2 Trade - Trade Depot
trade_depot = {
	cost = 200	#VU - Increased from 300 to 400 in v1.36.2.* by San Felipe
	time = 24
	#VU AddOn price changed from 300.
	#VU AddOn time changed from 12. Doubling upgraded buildings' build time.
	make_obsolete = marketplace
	modifier = {
		province_trade_power_modifier = 1
		trade_value = 0.35		#Don
		#VU 2.0 Debufs
		local_warscore_cost_modifier = 0.15
		local_core_creation = 0.03
		#VU 3.0
		local_governing_cost_increase = 10
	}
	build_trigger = {
		is_state = yes
		province_has_center_of_trade_of_level = 2
	}
	on_built = {
		#VU 3.0
		add_base_production = 2
	}
	on_destroyed = {
		#VU 3.0
		add_base_production = -2
	}
	on_obsolete = {
	}
	ai_will_do = {
		factor = 1
		################################
		## Don's New Super-Economy AI ##
		################################
		modifier = {
			factor = 0
			OR = {
				#Never do when...
				FROM = {
					vu_don_economy_ai_never_do_when = yes
				}
				#Never build in...
				vu_don_economy_ai_never_build_in = yes
			}
		}
		#Don note - both Avoids are separate, as they are supposed to stack...
		#Avoid doing when...
		modifier = {
			factor = 0.25
			FROM = {
				vu_don_economy_ai_avoid_doing_when = yes
			}
		}
		#Avoid building in...
		modifier = {
			factor = 0.25
			vu_don_economy_ai_avoid_building_in = yes
		}
		#############################
		## Trade buildings specific #
		#############################
		#Build in trade related provinces...
		modifier = {
			factor = 5
			vu_don_economy_ai_trade_in = yes
		}
	}
}

#Tier 3 Trade - Corporative Headquarters
corporative_headquarters = {
	cost = 300	#VU - Kept at 800 in v1.36.2.* by San Felipe
	time = 48
	make_obsolete = trade_depot
	modifier = {
		province_trade_power_modifier = 1.5
		trade_value = 0.5		#Don
		#VU 2.0 Debufs
		local_warscore_cost_modifier = 0.2
		local_core_creation = 0.05
		#VU 3.0
		local_governing_cost_increase = 15
	}
	build_trigger = {
		is_state = yes
		province_has_center_of_trade_of_level = 3
	}
	on_built = {
		#VU 3.0
		add_base_production = 3
	}
	on_destroyed = {
		#VU 3.0
		add_base_production = -3
	}
	on_obsolete = {
	}
	ai_will_do = {
		factor = 1
		################################
		## Don's New Super-Economy AI ##
		################################
		modifier = {
			factor = 0
			OR = {
				#Never do when...
				FROM = {
					vu_don_economy_ai_never_do_when = yes
				}
				#Never build in...
				vu_don_economy_ai_never_build_in = yes
			}
		}
		#Don note - both Avoids are separate, as they are supposed to stack...
		#Avoid doing when...
		modifier = {
			factor = 0.25
			FROM = {
				vu_don_economy_ai_avoid_doing_when = yes
			}
		}
		#Avoid building in...
		modifier = {
			factor = 0.25
			vu_don_economy_ai_avoid_building_in = yes
		}
		#############################
		## Trade buildings specific #
		#############################
		#Build in trade related provinces...
		modifier = {
			factor = 5
			vu_don_economy_ai_trade_in = yes
		}
	}
}

################################################
### ARMY
#Tier 1 Army - Barracks
barracks = {
	cost = 125	#VU - Increased from 100 to 150 in v1.36.2.* by San Felipe
	time = 12
	modifier = {
		local_manpower_modifier = 0.25
		local_manpower = 0.5		#Don
		#VU 2.0 Debufs
		local_warscore_cost_modifier = 0.1
		local_core_creation = 0.025
		#VU 3.0
		local_governing_cost_increase = 5
		global_tax_income = -0.6
	}
	on_built = {
		#VU 3.0
		add_base_manpower = 1
		if = {
			limit = {
				FROM = {
					has_government_attribute = manpower_sailors_on_build
				}
			}
			FROM = {
				add_manpower = 1
			}
		}
		if = {
			limit = {
				FROM = {
					mission_completed = jap_tanegashima_teppo
					has_dlc = "Cradle of Civilization"
				}
			}
			FROM = {
				add_army_professionalism = 0.001
			}
		}
		update_improved_military_buildings_modifier = {
			building = barracks
		}
	}
	on_destroyed = {
		#VU 3.0
		add_base_manpower = -1
		if = {
			limit = {
				FROM = {
					has_government_attribute = manpower_sailors_on_build
				}
			}
			FROM = {
				add_manpower = -1
			}
		}
		if = {
			limit = {
				FROM = {
					mission_completed = jap_tanegashima_teppo
					has_dlc = "Cradle of Civilization"
				}
			}
			FROM = {
				add_army_professionalism = -0.001
			}
		}
		update_improved_military_buildings_modifier = {
			building = barracks
		}
	}
	on_obsolete = {
	}
	ai_will_do = {
		factor = 1
		################################
		## Don's New Super-Economy AI ##
		################################
		modifier = {
			factor = 0
			OR = {
				#Never do when...
				FROM = {
					vu_don_economy_ai_never_do_when = yes
				}
				#Never build in...
				vu_don_economy_ai_never_build_in = yes
			}
		}
		#Don note - both Avoids are separate, as they are supposed to stack...
		#Avoid doing when...
		modifier = {
			factor = 0.25
			FROM = {
				vu_don_economy_ai_avoid_doing_when = yes
			}
		}
		#Avoid building in...
		modifier = {
			factor = 0.25
			vu_don_economy_ai_avoid_building_in = yes
		}
		######################
		## Manpower Specific #
		######################
		modifier = {
			factor = 2
			FROM = {
				vu_don_economy_ai_manpower_when = yes
			}
		}
		modifier = {
			factor = 2
			vu_don_economy_ai_manpower_in = yes
		}
	}
}

#Tier 2 Army - Training Fields
training_fields = {
	cost = 250	#VU - Kept at 300 in v1.36.2.* by San Felipe
	time = 24
	#VU AddOn price changed from 300. Part of the comprehensive balance overhaul to adjust buildings to the VU map (with all its new provinces).
	#VU AddOn time changed from 12. Doubling second level military buildings build time.
	make_obsolete = barracks
	modifier = {
		local_manpower_modifier = 1
		local_manpower = 0.5		#Don
		#VU 2.0 Debufs
		local_warscore_cost_modifier = 0.2
		local_core_creation = 0.05
		#VU 3.0
		local_governing_cost_increase = 10
		global_tax_income = -1.2
	}
	on_built = {
		#VU 3.0
		add_base_manpower = 2
		if = {
			limit = {
				FROM = {
					has_government_attribute = manpower_sailors_on_build
				}
			}
			FROM = {
				add_manpower = 1
			}
		}
		update_improved_military_buildings_modifier = {
			building = training_fields
		}
		if = {
			limit = {
				FROM = {
					mission_completed = jap_tanegashima_teppo
					has_dlc = "Cradle of Civilization"
				}
			}
			FROM = {
				add_army_professionalism = 0.001
			}
		}
	}
	on_destroyed = {
		#VU 3.0
		add_base_manpower = -2
		if = {
			limit = {
				FROM = {
					has_government_attribute = manpower_sailors_on_build
				}
			}
			FROM = {
				add_manpower = -1
			}
		}
		update_improved_military_buildings_modifier = {
			building = training_fields
		}
		if = {
			limit = {
				FROM = {
					mission_completed = jap_tanegashima_teppo
					has_dlc = "Cradle of Civilization"
				}
			}
			FROM = {
				add_army_professionalism = -0.001
			}
		}
	}
	on_obsolete = {
	}
	ai_will_do = {
		factor = 1
		################################
		## Don's New Super-Economy AI ##
		################################
		modifier = {
			factor = 0
			OR = {
				#Never do when...
				FROM = {
					vu_don_economy_ai_never_do_when = yes
				}
				#Never build in...
				vu_don_economy_ai_never_build_in = yes
			}
		}
		#Don note - both Avoids are separate, as they are supposed to stack...
		#Avoid doing when...
		modifier = {
			factor = 0.25
			FROM = {
				vu_don_economy_ai_avoid_doing_when = yes
			}
		}
		#Avoid building in...
		modifier = {
			factor = 0.25
			vu_don_economy_ai_avoid_building_in = yes
		}
		######################
		## Manpower Specific #
		######################
		modifier = {
			factor = 2
			FROM = {
				vu_don_economy_ai_manpower_when = yes
			}
		}
		modifier = {
			factor = 2
			vu_don_economy_ai_manpower_in = yes
		}
	}
}

#Tier 1 Army - Regimental Camp
regimental_camp = {
	cost = 125	#VU - Decreased from 200 to 150 in v1.36.2.* by San Felipe
	time = 12
	modifier = {
		land_forcelimit = 0.5
		regiment_recruit_speed = -0.15
		#VU 2.0 Debufs
		local_warscore_cost_modifier = 0.1
		local_core_creation = 0.025
		#VU 3.0
		local_governing_cost_increase = 5
		global_tax_income = -0.6
	}
	on_built = {
		#VU 3.0
		add_base_manpower = 1
		update_improved_military_buildings_modifier = {
			building = regimental_camp
		}
		if = {
			limit = {
				FROM = {
					mission_completed = jap_tanegashima_teppo
					has_dlc = "Cradle of Civilization"
				}
			}
			FROM = {
				add_army_professionalism = 0.001
			}
		}
	}
	on_destroyed = {
		#VU 3.0
		add_base_manpower = -1
		update_improved_military_buildings_modifier = {
			building = regimental_camp
		}
		if = {
			limit = {
				FROM = {
					mission_completed = jap_tanegashima_teppo
					has_dlc = "Cradle of Civilization"
				}
			}
			FROM = {
				add_army_professionalism = -0.001
			}
		}
	}
	on_obsolete = {
	}
	ai_will_do = {
		factor = 1
		################################
		## Don's New Super-Economy AI ##
		################################
		modifier = {
			factor = 0
			OR = {
				#Never do when...
				FROM = {
					vu_don_economy_ai_never_do_when = yes
				}
				#Never build in...
				vu_don_economy_ai_never_build_in = yes
			}
		}
		#Don note - both Avoids are separate, as they are supposed to stack...
		#Avoid doing when...
		modifier = {
			factor = 0.25
			FROM = {
				vu_don_economy_ai_avoid_doing_when = yes
			}
		}
		#Avoid building in...
		modifier = {
			factor = 0.25
			vu_don_economy_ai_avoid_building_in = yes
		}
		########################
		## Forcelimit Specific #
		########################
		modifier = {
			factor = 2
			FROM = {
				vu_don_economy_ai_forcelimit_when = yes
			}
		}
		modifier = {
			factor = 2
			vu_don_economy_ai_forcelimit_in = yes
		}
	}
}

#Tier 2 Army - Conscription Center
conscription_center = {
	cost = 250	#VU - Decreased from 400 to 300 in v1.36.2.* by San Felipe
	time = 24
	make_obsolete = regimental_camp
	modifier = {
		land_forcelimit = 1
		regiment_recruit_speed = -0.25
		#VU 2.0 Debufs
		local_warscore_cost_modifier = 0.2
		local_core_creation = 0.05
		#VU 3.0
		local_governing_cost_increase = 10
		global_tax_income = -1.2
	}
	#THIS = Province, FROM = Builder(not nessecairly owner, can be overlord)
	on_built = {
		#VU 3.0
		add_base_manpower = 2
		update_improved_military_buildings_modifier = {
			building = conscription_center
		}
		if = {
			limit = {
				FROM = {
					mission_completed = jap_tanegashima_teppo
					has_dlc = "Cradle of Civilization"
				}
			}
			FROM = {
				add_army_professionalism = 0.001
			}
		}
	}
	on_destroyed = {
		#VU 3.0
		add_base_manpower = -2
		update_improved_military_buildings_modifier = {
			building = conscription_center
		}
		if = {
			limit = {
				FROM = {
					mission_completed = jap_tanegashima_teppo
					has_dlc = "Cradle of Civilization"
				}
			}
			FROM = {
				add_army_professionalism = -0.001
			}
		}
	}
	on_obsolete = {
	}
	ai_will_do = {
		factor = 1
		################################
		## Don's New Super-Economy AI ##
		################################
		modifier = {
			factor = 0
			OR = {
				#Never do when...
				FROM = {
					vu_don_economy_ai_never_do_when = yes
				}
				#Never build in...
				vu_don_economy_ai_never_build_in = yes
			}
		}
		#Don note - both Avoids are separate, as they are supposed to stack...
		#Avoid doing when...
		modifier = {
			factor = 0.25
			FROM = {
				vu_don_economy_ai_avoid_doing_when = yes
			}
		}
		#Avoid building in...
		modifier = {
			factor = 0.25
			vu_don_economy_ai_avoid_building_in = yes
		}
		########################
		## Forcelimit Specific #
		########################
		modifier = {
			factor = 2
			FROM = {
				vu_don_economy_ai_forcelimit_when = yes
			}
		}
		modifier = {
			factor = 2
			vu_don_economy_ai_forcelimit_in = yes
		}
	}
}

################################################
### Navy
#Tier 1 Navy - Shipyard
shipyard = {
	cost = 125	#VU - Increased from 100 to 150 in v1.36.2.* by San Felipe
	time = 12
	#VU AddOn notes - leaving cost here despite lowering most others. Dramtically improving naval capabilities was a bit overpowered, in my opinion.
	#Especially compared to the regimental camp with half effect at double the price.
	modifier = {
		naval_forcelimit = 0.5
		ship_recruit_speed = -0.25
		local_ship_repair = 0.25
		local_has_man_of_war = yes
		local_has_galleass = yes
		#VU 2.0 Debufs
		local_warscore_cost_modifier = 0.1
		local_core_creation = 0.025
		#VU 3.0
		local_governing_cost_increase = 5
		global_tax_income = -0.6
	}
	build_trigger = {
		has_port = yes
	}
	on_built = {
		#VU 3.0
		add_base_production = 1
	}
	on_destroyed = {
		#VU 3.0
		add_base_production = -1
		if = {
			limit = {
				has_province_modifier = sca_swe_danish_shipyard
			}
			remove_province_modifier = sca_swe_danish_shipyard
		}
	}
	on_obsolete = {
	}
	ai_will_do = {
		factor = 1
		################################
		## Don's New Super-Economy AI ##
		################################
		modifier = {
			factor = 0
			OR = {
				#Never do when...
				FROM = {
					vu_don_economy_ai_never_do_when = yes
				}
				#Never build in...
				vu_don_economy_ai_never_build_in = yes
			}
		}
		#Don note - both Avoids are separate, as they are supposed to stack...
		#Avoid doing when...
		modifier = {
			factor = 0.25
			FROM = {
				vu_don_economy_ai_avoid_doing_when = yes
			}
		}
		#Avoid building in...
		modifier = {
			factor = 0.25
			vu_don_economy_ai_avoid_building_in = yes
		}
		##############################
		## Naval Forcelimit Specific #
		##############################
		modifier = {
			factor = 2
			FROM = {
				vu_don_economy_ai_naval_forcelimit_when = yes
			}
		}
		modifier = {
			factor = 2
			vu_don_economy_ai_naval_forcelimit_in = yes
		}
	}
}

#Tier 2 Navy
grand_shipyard = {
	cost = 250	#VU - Kept at 300 in v1.36.2.* by San Felipe
	time = 24
	make_obsolete = shipyard
	build_trigger = {
		has_port = yes
	}
	modifier = {
		naval_forcelimit = 1
		ship_recruit_speed = -0.5
		local_ship_repair = 0.5
		local_has_man_of_war = yes
		local_has_galleass = yes
		#VU 2.0 Debufs
		local_warscore_cost_modifier = 0.2
		local_core_creation = 0.05
		#VU 3.0
		local_governing_cost_increase = 10
		global_tax_income = -1.2
	}
	on_built = {
		#VU 3.0
		add_base_production = 2
	}
	on_destroyed = {
		#VU 3.0
		add_base_production = -2
		if = {
			limit = {
				has_province_modifier = sca_swe_danish_shipyard
			}
			remove_province_modifier = sca_swe_danish_shipyard
		}
	}
	on_obsolete = {
	}
	ai_will_do = {
		factor = 1
		################################
		## Don's New Super-Economy AI ##
		################################
		modifier = {
			factor = 0
			OR = {
				#Never do when...
				FROM = {
					vu_don_economy_ai_never_do_when = yes
				}
				#Never build in...
				vu_don_economy_ai_never_build_in = yes
			}
		}
		#Don note - both Avoids are separate, as they are supposed to stack...
		#Avoid doing when...
		modifier = {
			factor = 0.25
			FROM = {
				vu_don_economy_ai_avoid_doing_when = yes
			}
		}
		#Avoid building in...
		modifier = {
			factor = 0.25
			vu_don_economy_ai_avoid_building_in = yes
		}
		##############################
		## Naval Forcelimit Specific #
		##############################
		modifier = {
			factor = 2
			FROM = {
				vu_don_economy_ai_naval_forcelimit_when = yes
			}
		}
		modifier = {
			factor = 2
			vu_don_economy_ai_naval_forcelimit_in = yes
		}
	}
}

#Tier 1 Navy - Dock
dock = {
	cost = 125	#VU - Increased from 100 to 150 in v1.36.2.* by San Felipe
	time = 12
	modifier = {
		province_trade_power_modifier = 0.15
		local_sailors_modifier = 0.5
		local_sailors = 250
		local_has_man_of_war = yes
		local_has_galleass = yes
		#VU 2.0 Debufs
		local_warscore_cost_modifier = 0.1
		local_core_creation = 0.025
		#VU 3.0
		local_governing_cost_increase = 5
		global_tax_income = -0.6
	}
	build_trigger = {
		has_port = yes
	}
	on_built = {
		#VU 3.0
		add_base_production = 1
		if = {
			limit = {
				FROM = {
					has_government_attribute = manpower_sailors_on_build
				}
			}
			FROM = {
				add_sailors = 200
			}
		}
	}
	on_destroyed = {
		#VU 3.0
		add_base_production = -1
		if = {
			limit = {
				FROM = {
					has_government_attribute = manpower_sailors_on_build
				}
			}
			FROM = {
				add_sailors = -200
			}
		}
	}
	on_obsolete = {
	}
	ai_will_do = {
		factor = 1
		################################
		## Don's New Super-Economy AI ##
		################################
		modifier = {
			factor = 0
			OR = {
				#Never do when...
				FROM = {
					vu_don_economy_ai_never_do_when = yes
				}
				#Never build in...
				vu_don_economy_ai_never_build_in = yes
			}
		}
		#Don note - both Avoids are separate, as they are supposed to stack...
		#Avoid doing when...
		modifier = {
			factor = 0.25
			FROM = {
				vu_don_economy_ai_avoid_doing_when = yes
			}
		}
		#Avoid building in...
		modifier = {
			factor = 0.25
			vu_don_economy_ai_avoid_building_in = yes
		}
		####################
		## Sailor Specific #
		####################
		modifier = {
			factor = 2
			FROM = {
				vu_don_economy_ai_sailors_when = yes
			}
		}
		modifier = {
			factor = 2
			vu_don_economy_ai_sailors_in = yes
		}
	}
}

#Tier 2 Navy - Drydock
drydock = {
	cost = 250	#VU - Kept at 300 in v1.36.2.* by San Felipe
	time = 24
	make_obsolete = dock
	modifier = {
		province_trade_power_modifier = 0.15
		local_sailors_modifier = 0.5
		local_sailors = 500
		local_has_man_of_war = yes
		local_has_galleass = yes
		#VU 2.0 Debufs
		local_warscore_cost_modifier = 0.2
		local_core_creation = 0.05
		#VU 3.0
		local_governing_cost_increase = 10
		global_tax_income = -1.2
	}
	build_trigger = {
		has_port = yes
	}
	on_built = {
		#VU 3.0
		add_base_production = 2
		if = {
			limit = {
				FROM = {
					has_government_attribute = manpower_sailors_on_build
				}
			}
			FROM = {
				add_sailors = 200
			}
		}
	}
	on_destroyed = {
		#VU 3.0
		add_base_production = -2
		if = {
			limit = {
				FROM = {
					has_government_attribute = manpower_sailors_on_build
				}
			}
			FROM = {
				add_sailors = -200
			}
		}
	}
	on_obsolete = {
	}
	ai_will_do = {
		factor = 1
		################################
		## Don's New Super-Economy AI ##
		################################
		modifier = {
			factor = 0
			OR = {
				#Never do when...
				FROM = {
					vu_don_economy_ai_never_do_when = yes
				}
				#Never build in...
				vu_don_economy_ai_never_build_in = yes
			}
		}
		#Don note - both Avoids are separate, as they are supposed to stack...
		#Avoid doing when...
		modifier = {
			factor = 0.25
			FROM = {
				vu_don_economy_ai_avoid_doing_when = yes
			}
		}
		#Avoid building in...
		modifier = {
			factor = 0.25
			vu_don_economy_ai_avoid_building_in = yes
		}
		####################
		## Sailor Specific #
		####################
		modifier = {
			factor = 2
			FROM = {
				vu_don_economy_ai_sailors_when = yes
			}
		}
		modifier = {
			factor = 2
			vu_don_economy_ai_sailors_in = yes
		}
	}
}

################################################
### GOVERNMENT
#Tier 1 Government - Courthouse
courthouse = {
	cost = 250	#Decreased from 750
	time = 12
	build_trigger = {
		is_state = yes
	}
	modifier = {
		local_autonomy = -0.05
		local_governing_cost = -0.25
		allowed_num_of_buildings = 1
		#VU 2.0 Debufs
		local_warscore_cost_modifier = 0.2
		local_governing_cost_increase = -5
		#VU 3.0
		local_governing_cost = -0.15
		global_tax_income = -1.2
	}
	on_built = {
		#VU 3.0
		add_base_tax = 1
		if = {
			limit = {
				FROM = {
					has_country_flag = fra_courthouse_bonus_flag
				}
			}
			add_province_modifier = {
				name = fra_improved_court_houses_modifier
				duration = -1
			}
		}
	}
	on_destroyed = {
		#VU 3.0
		add_base_tax = -1
		remove_province_modifier = fra_improved_court_houses_modifier
	}
	on_obsolete = {
	}
	ai_will_do = {
		factor = 1
		################################
		## Don's New Super-Economy AI ##
		################################
		modifier = {
			factor = 0
			OR = {
				#Government buildings have a different never do when...
				FROM = {
					vu_don_economy_ai_government_never_do_when = yes
				}
				#Never build in...
				vu_don_economy_ai_never_build_in = yes
			}
		}
		#Don note - both Avoids are separate, as they are supposed to stack...
		#Avoid doing when...
		modifier = {
			factor = 0.25
			FROM = {
				vu_don_economy_ai_avoid_doing_when = yes
			}
		}
		#Avoid building in...
		modifier = {
			factor = 0.25
			vu_don_economy_ai_avoid_building_in = yes
		}
		########################
		## Government Specific #
		########################
		modifier = {
			factor = 5
			FROM = {
				vu_don_economy_ai_government_when = yes
			}
		}
	}
}

#Tier 1 Government - Hall
hall = {
	cost = 125	#VU - Increased from 150 to 200 in v1.36.2.* by San Felipe
	time = 12
	#VU AddOn changed from 12. Doubling upgraded buildings' build time.
	#VU 13 added to balance states territories and tradecompanies.
	build_trigger = {
		is_state = yes
	}
	modifier = {
		local_state_maintenance_modifier = -0.25
		local_tax_modifier = 0.1
		local_autonomy = -0.1
		allowed_num_of_buildings = 1
		#VU 2.0 Debufs
		local_warscore_cost_modifier = 0.15
		local_governing_cost = -0.1
		#VU 3.0
		local_governing_cost_increase = -10
		global_tax_income = -0.6
	}
	on_built = {
		#VU 3.0
		add_base_tax = 1
	}
	on_destroyed = {
		#VU 3.0
		add_base_tax = -1
	}
	on_obsolete = {
	}
	ai_will_do = {
		factor = 1
		################################
		## Don's New Super-Economy AI ##
		################################
		modifier = {
			factor = 0
			OR = {
				#Government buildings have a different never do when...
				FROM = {
					vu_don_economy_ai_government_never_do_when = yes
				}
				#Never build in...
				vu_don_economy_ai_never_build_in = yes
			}
		}
		#Don note - both Avoids are separate, as they are supposed to stack...
		#Avoid doing when...
		modifier = {
			factor = 0.25
			FROM = {
				vu_don_economy_ai_avoid_doing_when = yes
			}
		}
		#Avoid building in...
		modifier = {
			factor = 0.25
			vu_don_economy_ai_avoid_building_in = yes
		}
		########################
		## Government Specific #
		########################
		modifier = {
			factor = 5
			FROM = {
				vu_don_economy_ai_government_when = yes
			}
		}
	}
}

#Tier 2 Government - Town Hall
town_hall = {
	cost = 250	#VU - Increased from 300 to 400 in v1.36.2.* by San Felipe
	time = 24
	#VU AddOn changed from 12. Doubling upgraded buildings' build time.
	#VU 13 added to balance states territories and tradecompanies.
	build_trigger = {
		is_state = yes
	}
	make_obsolete = hall
	modifier = {
		local_state_maintenance_modifier = -0.5
		local_tax_modifier = 0.2
		local_autonomy = -0.2
		allowed_num_of_buildings = 1
		#VU 2.0 Debufs
		local_warscore_cost_modifier = 0.2
		local_governing_cost = -0.2
		#VU 3.0
		local_governing_cost_increase = -20
		global_tax_income = -1.2
	}
	on_built = {
		#VU 3.0
		add_base_tax = 2
		add_province_modifier = {
			name = fra_improved_halls_modifier
			duration = -1
		}
		#Hashed out in VU ToR 1.37 by SF
		#if = {
		#	limit = {
		#		FROM = {
		#			has_country_flag = fra_hall_bonus_flag
		#		}
		#		NOT = {
		#			has_province_modifier = fra_improved_halls_modifier
		#		}
		#	}
		#	add_province_modifier = {
		#		name = fra_improved_halls_modifier
		#		duration = -1
		#	}
		#}
	}
	on_destroyed = {
		#VU 3.0
		add_base_tax = -2
		remove_province_modifier = fra_improved_halls_modifier
	}
	on_obsolete = {
		remove_development_from_building = {
			building = town_hall
			type = tax
			value = 2
		}
		remove_province_modifier = fra_improved_halls_modifier
	}
	ai_will_do = {
		factor = 1
		################################
		## Don's New Super-Economy AI ##
		################################
		modifier = {
			factor = 0
			OR = {
				#Government buildings have a different never do when...
				FROM = {
					vu_don_economy_ai_government_never_do_when = yes
				}
				#Never build in...
				vu_don_economy_ai_never_build_in = yes
			}
		}
		#Don note - both Avoids are separate, as they are supposed to stack...
		#Avoid doing when...
		modifier = {
			factor = 0.25
			FROM = {
				vu_don_economy_ai_avoid_doing_when = yes
			}
		}
		#Avoid building in...
		modifier = {
			factor = 0.25
			vu_don_economy_ai_avoid_building_in = yes
		}
		########################
		## Government Specific #
		########################
		modifier = {
			factor = 5
			FROM = {
				vu_don_economy_ai_government_when = yes
			}
		}
	}
}

#Tier 3 Government - City Hall
city_hall = {
	cost = 500	#VU - Increased from 450 to 600 in v1.36.2.* by San Felipe
	time = 36
	#VU AddOn changed from 12. Doubling upgraded buildings' build time.
	#VU 13 added to balance states territories and tradecompanies.
	build_trigger = {
		is_state = yes
	}
	make_obsolete = town_hall
	modifier = {
		local_state_maintenance_modifier = -0.75
		local_tax_modifier = 0.3
		local_autonomy = -0.3
		allowed_num_of_buildings = 2
		#VU 2.0 Debufs
		local_warscore_cost_modifier = 0.3
		local_governing_cost = -0.3
		#VU 3.0
		local_governing_cost_increase = -30
		global_tax_income = -2.4
	}
	on_built = {
		add_base_tax = 3
		add_province_modifier = {
			name = fra_improved_town_hall_modifier
			duration = -1
		}
		#Hashed out in VU ToR 1.37 by SF
		#if = {
		#	limit = {
		#		FROM = {
		#			has_country_flag = fra_town_hall_bonus_flag
		#		}
		#		NOT = {
		#			has_province_modifier = fra_improved_town_hall_modifier
		#		}
		#	}
		#	add_province_modifier = {
		#		name = fra_improved_town_hall_modifier
		#		duration = -1
		#	}
		#}
	}
	on_destroyed = {
		#VU 3.0
		add_base_tax = -3
		remove_province_modifier = fra_improved_town_hall_modifier
	}
	on_obsolete = {
	}
	ai_will_do = {
		factor = 1
		################################
		## Don's New Super-Economy AI ##
		################################
		modifier = {
			factor = 0
			OR = {
				#Government buildings have a different never do when...
				FROM = {
					vu_don_economy_ai_government_never_do_when = yes
				}
				#Never build in...
				vu_don_economy_ai_never_build_in = yes
			}
		}
		#Don note - both Avoids are separate, as they are supposed to stack...
		#Avoid doing when...
		modifier = {
			factor = 0.25
			FROM = {
				vu_don_economy_ai_avoid_doing_when = yes
			}
		}
		#Avoid building in...
		modifier = {
			factor = 0.25
			vu_don_economy_ai_avoid_building_in = yes
		}
		########################
		## Government Specific #
		########################
		modifier = {
			factor = 5
			FROM = {
				vu_don_economy_ai_government_when = yes
			}
		}
	}
}

#Tier 1 Education - Library
library = {
	cost = 100	#VU - Kept at 300 in v1.36.2.* by San Felipe
	time = 12
	modifier = {
		local_development_cost = -0.1
		local_institution_spread = 0.5
		local_prosperity_growth = 0.1
		#VU 2.0 Debufs
		local_warscore_cost_modifier = 0.1
		#VU 3.0
		local_governing_cost_increase = -5
		global_tax_income = -0.6
	}
	on_built = {
		#VU 3.0
		add_base_tax = 1
	}
	on_destroyed = {
		#VU 3.0
		add_base_tax = -1
	}
	on_obsolete = {
	}
	ai_will_do = {
		factor = 1
		################################
		## Don's New Super-Economy AI ##
		################################
		modifier = {
			factor = 0
			OR = {
				#Government buildings have a different never do when...
				FROM = {
					vu_don_economy_ai_government_never_do_when = yes
				}
				#Never build in...
				vu_don_economy_ai_never_build_in = yes
			}
		}
		#Don note - both Avoids are separate, as they are supposed to stack...
		#Avoid doing when...
		modifier = {
			factor = 0.25
			FROM = {
				vu_don_economy_ai_avoid_doing_when = yes
			}
		}
		#Avoid building in...
		modifier = {
			factor = 0.25
			vu_don_economy_ai_avoid_building_in = yes
		}
		########################
		## Government Specific #
		########################
		modifier = {
			factor = 5
			FROM = {
				vu_don_economy_ai_government_when = yes
			}
		}
		#######################
		## Education Specific #
		#######################
		modifier = {
			factor = 2
			FROM = {
				vu_don_economy_ai_education_when = yes
			}
		}
		modifier = {
			factor = 2
			vu_don_economy_ai_education_in = yes
		}
	}
}

#Tier 2 Education - School
school = {
	cost = 200	#VU - Increased from 300 to 600 in v1.36.2.* by San Felipe
	time = 12
	modifier = {
		local_development_cost = -0.1
		local_institution_spread = 0.5
		local_prosperity_growth = 0.2
		#VU 2.0 Debufs
		local_warscore_cost_modifier = 0.2
		#VU 3.0
		local_governing_cost_increase = -10
		global_tax_income = -1.2
	}
	on_built = {
		#VU 3.0
		add_base_tax = 1
	}
	on_destroyed = {
		#VU 3.0
		add_base_tax = -1
	}
	on_obsolete = {
	}
	#Neart perfect copy because I'm not spending my time organising this. Economy 101 was shoved at the end.
	ai_will_do = {
		factor = 1
		################################
		## Don's New Super-Economy AI ##
		################################
		modifier = {
			factor = 0
			OR = {
				#Government buildings have a different never do when...
				FROM = {
					vu_don_economy_ai_government_never_do_when = yes
				}
				#Never build in...
				vu_don_economy_ai_never_build_in = yes
			}
		}
		#Don note - both Avoids are separate, as they are supposed to stack...
		#Avoid doing when...
		modifier = {
			factor = 0.25
			FROM = {
				vu_don_economy_ai_avoid_doing_when = yes
			}
		}
		#Avoid building in...
		modifier = {
			factor = 0.25
			vu_don_economy_ai_avoid_building_in = yes
		}
		########################
		## Government Specific #
		########################
		modifier = {
			factor = 5
			FROM = {
				vu_don_economy_ai_government_when = yes
			}
		}
		#######################
		## Education Specific #
		#######################
		modifier = {
			factor = 2
			FROM = {
				vu_don_economy_ai_education_when = yes
			}
		}
		modifier = {
			factor = 2
			vu_don_economy_ai_education_in = yes
		}
	}
}

#Tier 3 Education - University
university = {
	cost = 500	#from 900 to 1000
	time = 60	#from 36 (3 years) to 60 (5 years)
	modifier = {
		local_development_cost = -0.2
		local_institution_spread = 1
		local_prosperity_growth = 0.2
		local_unrest = -1
		#VU 2.0 Debufs
		local_warscore_cost_modifier = 0.25
		#VU 3.0
		local_governing_cost_increase = -30
		global_tax_income = -2.4
	}
	on_built = {
		#VU 3.0
		add_base_tax = 1
	}
	on_destroyed = {
		#VU 3.0
		add_base_tax = -1
	}
	on_obsolete = {
	}
	ai_will_do = {
		factor = 1
		################################
		## Don's New Super-Economy AI ##
		################################
		modifier = {
			factor = 0
			OR = {
				#Government buildings have a different never do when...
				FROM = {
					vu_don_economy_ai_government_never_do_when = yes
				}
				#Never build in...
				vu_don_economy_ai_never_build_in = yes
			}
		}
		#Don note - both Avoids are separate, as they are supposed to stack...
		#Avoid doing when...
		modifier = {
			factor = 0.25
			FROM = {
				vu_don_economy_ai_avoid_doing_when = yes
			}
		}
		#Avoid building in...
		modifier = {
			factor = 0.25
			vu_don_economy_ai_avoid_building_in = yes
		}
		########################
		## Government Specific #
		########################
		modifier = {
			factor = 5
			FROM = {
				vu_don_economy_ai_government_when = yes
			}
		}
		#######################
		## Education Specific #
		#######################
		modifier = {
			factor = 2
			FROM = {
				vu_don_economy_ai_education_when = yes
			}
		}
		modifier = {
			factor = 2
			vu_don_economy_ai_education_in = yes
		}
	}
}

################################################
### TAXATION
#Tier 1 Taxation - Temple
temple = {
	cost = 125	#VU - Increased from 100 to 250 in v1.36.2.* by San Felipe
	time = 12
	modifier = {
		local_missionary_strength = 0.03
		local_tax_modifier = 0.75
		local_religious_unity_contribution = 0.1
		#VU 2.0 Debufs
		local_warscore_cost_modifier = 0.1
		local_core_creation = 0.025
		#VU 3.0
		local_governing_cost_increase = 2.5
		tax_income = 0.6
	}
	on_built = {
		#VU 3.0
		add_base_tax = 1
		on_built_tax_building_effect = yes
		on_province_tax_building_built_estate_privileges_effect = yes
		if = {
			limit = {
				FROM = {
					has_government_attribute = on_church_built_clergy_loyalty
				}
			}
			FROM = {
				add_estate_loyalty = {
					estate = estate_church
					loyalty = 2
				}
			}
		}
		if = {
			limit = {
				FROM = {
					has_government_attribute = temples_modifier
				}
				owned_by = FROM
			}
			add_province_modifier = {
				name = gov_expanded_temple_rights_mod
				duration = -1
			}
		}
		if = {
			limit = {
				FROM = {
					has_country_flag = mosque_local_unrest_flag
				}
			}
			add_province_modifier = {
				name = turkoman_peaceful_worshipping
				duration = -1
			}
		}
		if = {
			limit = {
				FROM = {
					has_country_modifier = mam_mosque_great_mosque_generates_crown_land_modifier
				}
			}
			FROM = {
				change_estate_land_share = {
					estate = all
					share = -0.25
				}
			}
		}
		if = {
			limit = {
				FROM = {
					has_government_mechanic = blood_gathering_mechanic
				}
			}
			FROM = {
				add_government_power = {
					mechanic_type = blood_gathering_mechanic
					power_type = blood
					value = 0.5
				}
			}
		}
		if = {
			limit = {
				FROM = {
					has_country_flag = azt_temples_buffs_flag
				}
			}
			add_province_modifier = {
				name = azt_religious_classes
				duration = -1
				hidden = yes
			}
		}
	}
	on_destroyed = {
		#VU 3.0
		add_base_tax = -1
		on_province_tax_building_destroyed_estate_privileges_effect = yes
		if = {
			limit = {
				FROM = {
					has_country_flag = mosque_local_unrest_flag
				}
			}
			remove_province_modifier = turkoman_peaceful_worshipping
		}
		if = {
			limit = {
				FROM = {
					has_government_attribute = on_church_built_clergy_loyalty
				}
			}
			FROM = {
				add_estate_loyalty = {
					estate = estate_church
					loyalty = -2
				}
			}
		}
		remove_province_modifier = gov_expanded_temple_rights_mod
		if = {
			limit = {
				FROM = {
					has_country_modifier = mam_mosque_great_mosque_generates_crown_land_modifier
				}
			}
			FROM = {
				change_estate_land_share = {
					estate = all
					share = 0.25
				}
			}
		}
		if = {
			limit = {
				FROM = {
					has_government_mechanic = blood_gathering_mechanic
				}
			}
			FROM = {
				add_government_power = {
					mechanic_type = blood_gathering_mechanic
					power_type = blood
					value = -1
				}
			}
		}
		if = {
			limit = {
				has_province_modifier = azt_religious_classes
			}
			remove_province_modifier = azt_religious_classes
		}
	}
	on_obsolete = {
		if = {
			limit = {
				has_province_modifier = estate_nobles_development_of_castles_mod
			}
			remove_province_modifier = estate_nobles_development_of_castles_mod
		}
	}
	onmap = yes
	ai_will_do = {
		factor = 1
		################################
		## Don's New Super-Economy AI ##
		################################
		modifier = {
			factor = 0
			OR = {
				#Never do when...
				FROM = {
					vu_don_economy_ai_never_do_when = yes
				}
				#Never build in...
				vu_don_economy_ai_never_build_in = yes
			}
		}
		#Don note - both Avoids are separate, as they are supposed to stack...
		#Avoid doing when...
		modifier = {
			factor = 0.25
			FROM = {
				vu_don_economy_ai_avoid_doing_when = yes
			}
		}
		#Avoid building in...
		modifier = {
			factor = 0.25
			vu_don_economy_ai_avoid_building_in = yes
		}
		####################
		## Church Specific #
		####################
		modifier = {
			factor = 2
			FROM = {
				vu_don_economy_ai_church_when = yes
			}
		}
		modifier = {
			factor = 2
			vu_don_economy_ai_church_in = yes
		}
	}
}

#Tier 2 Taxation - Cathedral
cathedral = {
	make_obsolete = temple
	cost = 250	#VU - Increased from 300 to 500 in v1.36.2.* by San Felipe
	time = 24
	modifier = {
		local_missionary_strength = 0.04
		local_tax_modifier = 1.25
		local_religious_unity_contribution = 0.2
		#VU 2.0 Debufs
		local_warscore_cost_modifier = 0.15
		local_core_creation = 0.03
		#VU 3.0
		local_governing_cost_increase = 5
		tax_income = 1.2
	}
	#VU AddOn changed price from 300. Part of the comprehensive balance overhaul to adjust buildings to the VU map (with all its new provinces).
	#VU AddOn changed from 12. Doubling upgraded buildings' build time.
	on_built = {
		#VU 3.0
		add_base_production = 2
		on_built_tax_building_effect = yes
		on_province_tax_building_built_estate_privileges_effect = yes
		if = {
			limit = {
				FROM = {
					has_government_attribute = on_church_built_clergy_loyalty
				}
			}
			FROM = {
				add_estate_loyalty = {
					estate = estate_church
					loyalty = 5
				}
			}
		}
		if = {
			limit = {
				FROM = {
					has_government_attribute = temples_modifier
				}
				owned_by = FROM
			}
			add_province_modifier = {
				name = gov_expanded_temple_rights_mod
				duration = -1
			}
		}
		if = {
			limit = {
				FROM = {
					has_country_flag = mosque_local_unrest_flag
				}
			}
			add_province_modifier = {
				name = turkoman_peaceful_worshipping
				duration = -1
			}
		}
		if = {
			limit = {
				FROM = {
					has_country_modifier = mam_mosque_great_mosque_generates_crown_land_modifier
				}
			}
			FROM = {
				change_estate_land_share = {
					estate = all
					share = -0.25
				}
			}
		}
		if = {
			limit = {
				FROM = {
					has_government_mechanic = blood_gathering_mechanic
				}
			}
			FROM = {
				add_government_power = {
					mechanic_type = blood_gathering_mechanic
					power_type = blood
					value = 0.5
				}
			}
		}
	}
	on_destroyed = {
		#VU 3.0
		add_base_tax = -2
		on_province_tax_building_destroyed_estate_privileges_effect = yes
		if = {
			limit = {
				FROM = {
					has_country_flag = mosque_local_unrest_flag
				}
			}
			remove_province_modifier = turkoman_peaceful_worshipping
		}
		if = {
			limit = {
				FROM = {
					has_government_attribute = on_church_built_clergy_loyalty
				}
			}
			FROM = {
				add_estate_loyalty = {
					estate = estate_church
					loyalty = -5
				}
			}
		}
		remove_province_modifier = gov_expanded_temple_rights_mod
		if = {
			limit = {
				FROM = {
					has_country_modifier = mam_mosque_great_mosque_generates_crown_land_modifier
				}
			}
			FROM = {
				change_estate_land_share = {
					estate = all
					share = 0.25
				}
			}
		}
		if = {
			limit = {
				FROM = {
					has_government_mechanic = blood_gathering_mechanic
				}
			}
			FROM = {
				add_government_power = {
					mechanic_type = blood_gathering_mechanic
					power_type = blood
					value = -1
				}
			}
		}
		if = {
			limit = {
				has_province_modifier = azt_religious_classes
			}
			remove_province_modifier = azt_religious_classes
		}
	}
	on_obsolete = {
	}
	ai_will_do = {
		factor = 1
		################################
		## Don's New Super-Economy AI ##
		################################
		modifier = {
			factor = 0
			OR = {
				#Never do when...
				FROM = {
					vu_don_economy_ai_never_do_when = yes
				}
				#Never build in...
				vu_don_economy_ai_never_build_in = yes
			}
		}
		#Don note - both Avoids are separate, as they are supposed to stack...
		#Avoid doing when...
		modifier = {
			factor = 0.25
			FROM = {
				vu_don_economy_ai_avoid_doing_when = yes
			}
		}
		#Avoid building in...
		modifier = {
			factor = 0.25
			vu_don_economy_ai_avoid_building_in = yes
		}
		####################
		## Church Specific #
		####################
		modifier = {
			factor = 2
			FROM = {
				vu_don_economy_ai_church_when = yes
			}
		}
		modifier = {
			factor = 2
			vu_don_economy_ai_church_in = yes
		}
	}
}

#Tier 3 Taxation - Grand Cathedral
grand_cathedral = {
	make_obsolete = cathedral
	cost = 325	#VU - Increased from 400 to 750 in v1.36.2.* by San Felipe
	time = 36
	modifier = {
		local_missionary_strength = 0.05
		local_tax_modifier = 2.5
		local_religious_unity_contribution = 0.3
		#VU 2.0 Debufs
		local_warscore_cost_modifier = 0.2
		local_core_creation = 0.05
		#VU 3.0
		local_governing_cost_increase = 10
		tax_income = 2.4
	}
	on_built = {
		#VU 3.0
		add_base_tax = 3
		on_province_tax_building_built_estate_privileges_effect = yes
		if = {
			limit = {
				FROM = {
					has_government_attribute = on_church_built_clergy_loyalty
				}
			}
			FROM = {
				add_estate_loyalty = {
					estate = estate_church
					loyalty = 7
				}
			}
		}
		if = {
			limit = {
				FROM = {
					has_government_attribute = temples_modifier
				}
				owned_by = FROM
			}
			add_province_modifier = {
				name = gov_expanded_temple_rights_mod
				duration = -1
			}
		}
	}
	on_destroyed = {
		#VU 3.0
		add_base_tax = -3
		on_province_tax_building_destroyed_estate_privileges_effect = yes
		if = {
			limit = {
				FROM = {
					has_government_attribute = on_church_built_clergy_loyalty
				}
			}
			FROM = {
				add_estate_loyalty = {
					estate = estate_church
					loyalty = -7
				}
			}
		}
		remove_province_modifier = gov_expanded_temple_rights_mod
	}
	on_obsolete = {
	}
	ai_will_do = {
		factor = 1
		################################
		## Don's New Super-Economy AI ##
		################################
		modifier = {
			factor = 0
			OR = {
				#Never do when...
				FROM = {
					vu_don_economy_ai_never_do_when = yes
				}
				#Never build in...
				vu_don_economy_ai_never_build_in = yes
			}
		}
		#Don note - both Avoids are separate, as they are supposed to stack...
		#Avoid doing when...
		modifier = {
			factor = 0.25
			FROM = {
				vu_don_economy_ai_avoid_doing_when = yes
			}
		}
		#Avoid building in...
		modifier = {
			factor = 0.25
			vu_don_economy_ai_avoid_building_in = yes
		}
		####################
		## Church Specific #
		####################
		modifier = {
			factor = 2
			FROM = {
				vu_don_economy_ai_church_when = yes
			}
		}
		modifier = {
			factor = 2
			vu_don_economy_ai_church_in = yes
		}
	}
}

################################################
### TRANSPORTATION
#Tier 1 Transportation - Road System
road_system = {
	cost = 50	#VU - Kept at 100 in v1.36.2.* by San Felipe
	time = 6
	modifier = {
		#Buffs
		local_friendly_movement_speed = 0.15
		allowed_num_of_buildings = 2
		local_build_time = -0.1
		local_build_cost = -0.05
		trade_value = 0.1
		trade_goods_size = 0.1
		#Debuffs
		global_tax_income = -0.6
		#Misc
		local_warscore_cost_modifier = 0.1
		local_core_creation = 0.02
	}
	on_built = {
		#VU 3.0
		add_base_production = 1
	}
	on_destroyed = {
		#VU 3.0
		add_base_production = -1
	}
	ai_will_do = {
		factor = 1
		################################
		## Don's New Super-Economy AI ##
		################################
		modifier = {
			factor = 0
			OR = {
				#Never do when...
				FROM = {
					vu_don_economy_ai_never_do_when = yes
				}
				#Never build in...
				vu_don_economy_ai_never_build_in = yes
			}
		}
		#Don note - both Avoids are separate, as they are supposed to stack...
		#Avoid doing when...
		modifier = {
			factor = 0.25
			FROM = {
				vu_don_economy_ai_avoid_doing_when = yes
			}
		}
		#Avoid building in...
		modifier = {
			factor = 0.25
			vu_don_economy_ai_avoid_building_in = yes
		}
	}
}

#Tier 2 Transportation - Canal System
canal_system = {
	cost = 75	#VU - Increased from 100 to 150 in v1.36.2.* by San Felipe
	time = 8
	make_obsolete = road_system
	modifier = {
		local_friendly_movement_speed = 0.2		#all changed by Don
		trade_value_modifier = 0.1		#Removed trade value, replaced with modifier
		allowed_num_of_buildings = 3
		#VU 2.0 Buffs
		#VU 2.0 Debufs
		local_warscore_cost_modifier = 0.15
		local_core_creation = 0.03
		#VU 3.0
		local_governing_cost_increase = 10
		local_build_time = -0.15
		local_build_cost = -0.1
		local_production_efficiency = 0.1
		global_tax_income = -1.2
	}
	on_built = {
		#VU 3.0
		add_base_production = 1
	}
	on_destroyed = {
		#VU 3.0
		add_base_production = -1
	}
	build_trigger = {
		#Can only build if province is coastal or a neighbouring province has it
		OR = {
			has_port = yes
			any_neighbor_province = {
				has_building = canal_system
			}
		}
		#Can't build if province has a terrain not suitable for canals.
		NOT = {
			OR = {
				has_terrain = mountain
				has_terrain = cold_mountains
				has_terrain = desert_ranges
				has_terrain = tundra_terrain
				has_terrain = glacier
			}
		}
	}
	ai_will_do = {
		factor = 1
		################################
		## Don's New Super-Economy AI ##
		################################
		modifier = {
			factor = 0
			OR = {
				#Never do when...
				FROM = {
					vu_don_economy_ai_never_do_when = yes
				}
				#Never build in...
				vu_don_economy_ai_never_build_in = yes
			}
		}
		#Don note - both Avoids are separate, as they are supposed to stack...
		#Avoid doing when...
		modifier = {
			factor = 0.25
			FROM = {
				vu_don_economy_ai_avoid_doing_when = yes
			}
		}
		#Avoid building in...
		modifier = {
			factor = 0.25
			vu_don_economy_ai_avoid_building_in = yes
		}
	}
}

#Tier 3 Transportation - Railway System
railway_system = {
	cost = 150	#VU - Increased from 250 to 300 in v1.36.2.* by San Felipe
	time = 12
	make_obsolete = canal_system
	#Changed cost from 400. While railways should be expensive, they shouldn't be as expensive as entire buildings.
	#Changed time from 12 because railways are significantly better than roads and canals.
	#Removed the DLC requirements so those that don't have them can still have railways.
	#Change the building triggers to favour terrain restrictions instead of coal production, railway adjacency or rail boom.
	modifier = {
		local_friendly_movement_speed = 0.3		#all changed by Don
		trade_value_modifier = 0.2		#Removed trade value, replaced with modifier
		allowed_num_of_buildings = 4
		#VU 2.0 Buffs
		#VU 2.0 Debufs
		local_warscore_cost_modifier = 0.2
		local_core_creation = 0.05
		#VU 3.0
		local_governing_cost_increase = 15
		local_build_time = -0.2
		local_build_cost = -0.15
		local_production_efficiency = 0.15
		global_tax_income = -2.4
	}
	on_built = {
		#VU 3.0
		add_base_production = 1
	}
	on_destroyed = {
		#VU 3.0
		add_base_production = -1
	}
	build_trigger = {
		#Can't build if province has a terrain not suitable for railways.
		NOT = {
			has_terrain = glacier
		}
	}
	ai_will_do = {
		factor = 1
		################################
		## Don's New Super-Economy AI ##
		################################
		modifier = {
			factor = 0
			OR = {
				#Never do when...
				FROM = {
					vu_don_economy_ai_never_do_when = yes
				}
				#Never build in...
				vu_don_economy_ai_never_build_in = yes
			}
		}
		#Don note - both Avoids are separate, as they are supposed to stack...
		#Avoid doing when...
		modifier = {
			factor = 0.25
			FROM = {
				vu_don_economy_ai_avoid_doing_when = yes
			}
		}
		#Avoid building in...
		modifier = {
			factor = 0.25
			vu_don_economy_ai_avoid_building_in = yes
		}
	}
}

################################################
### COASTAL DEFENCE
#Tier 1 Coastal - Naval Base
naval_base = {
	cost = 100	#VU - Increased from 100 to 250 in v1.36.2.* by San Felipe
	time = 12
	build_trigger = {
		has_port = yes
	}
	modifier = {
		blockade_force_required = 0.5
		hostile_disembark_speed = 0.5
		hostile_fleet_attrition = 1
		block_slave_raid = yes
		#VU 2.0 Debufs
		local_warscore_cost_modifier = 0.1
		local_hostile_movement_speed = -0.1
		local_core_creation = 0.025
		#VU 3.0
		local_governing_cost_increase = 5
	}
	on_built = {
		#VU 3.0
		add_base_manpower = 1
	}
	on_destroyed = {
		#VU 3.0
		add_base_manpower = -1
	}
	ai_will_do = {
		factor = 0
	}
}

#Tier 2 Coastal - Naval Arsenal
naval_arsenal = {
	cost = 200
	time = 24
	build_trigger = {
		has_port = yes
	}
	make_obsolete = naval_base
	modifier = {
		blockade_force_required = 1
		hostile_disembark_speed = 2
		hostile_fleet_attrition = 5
		block_slave_raid = yes
		#VU 2.0 Debufs
		local_warscore_cost_modifier = 0.2
		local_hostile_movement_speed = -0.2
		local_core_creation = 0.05
		#VU 3.0
		local_governing_cost_increase = 10
	}
	on_built = {
		#VU 3.0
		add_base_manpower = 2
	}
	on_destroyed = {
		#VU 3.0
		add_base_manpower = -2
	}
	ai_will_do = {
		factor = 0
	}
}

#Tier 3 Coastal - Coastal Artillery
coastal_artillery = {
	cost = 300
	time = 36
	build_trigger = {
		has_port = yes
	}
	make_obsolete = naval_arsenal
	modifier = {
		blockade_force_required = 2
		hostile_disembark_speed = 2
		hostile_fleet_attrition = 5
		block_slave_raid = yes
		#VU 2.0 Debufs
		local_warscore_cost_modifier = 0.3
		local_hostile_movement_speed = -0.3
		local_core_creation = 0.1
		#VU 3.0
		local_governing_cost_increase = 15
	}
	on_built = {
		#VU 3.0
		add_base_manpower = 3
	}
	on_destroyed = {
		#VU 3.0
		add_base_manpower = -3
	}
	ai_will_do = {
		factor = 0
	}
}

################################################
### DEFENSE
#Tier 1 Fortification - Castle
fort_15th = {
	cost = 250	#VU - Increased from 200 to 250 in v1.36.2.* by San Felipe
	time = 12
	#VU AddOn changed price from original 200. Castles were way too cheap to build but also too expensive to maintain in VU. Note upkeep is controlled in defines and is generated based on fort level, I believe with reduced fort levels the vanilla .5 per month per level is fine
	#Time changed from 30 to 24 so fort levels are 2y, 3y, 4y and 5y respectively.
	modifier = {
		fort_level = 1
		local_defensiveness = 0.25
		#VU 3.0
		local_fort_maintenance_modifier = 0.15
		local_governing_cost_increase = 10
		local_assault_fort_ability = -0.05
	}
	# THIS = Province, FROM = Builder(not nessecairly owner, can be overlord)
	on_built = {
		#VU 3.0
		add_base_manpower = 1
		if = {
			limit = {
				FROM = {
					NOT = {
						mil_tech = 14
					}
					has_government_attribute = on_fort_built_nobles_loyalty
				}
			}
			FROM = {
				if = {
					limit = {
						has_estate = estate_nobles
					}
					add_estate_loyalty = {
						estate = estate_nobles
						loyalty = 5
					}
				}
				if = {
					limit = {
						has_estate = estate_maratha
					}
					add_estate_loyalty = {
						estate = estate_maratha
						loyalty = 5
					}
				}
				if = {
					limit = {
						has_estate = estate_rajput
					}
					add_estate_loyalty = {
						estate = estate_rajput
						loyalty = 5
					}
				}
			}
		}
		if = {
			limit = {
				owner = {
					has_estate_privilege = estate_nobles_development_of_castles
				}
				NOT = {
					has_province_modifier = estate_nobles_development_of_castles_mod
				}
			}
			add_province_modifier = {
				name = estate_nobles_development_of_castles_mod
				duration = -1
			}
		}
		if = {
			limit = {
				FROM = {
					has_country_flag = orm_forts_trade_power_buff_flag
				}
			}
			add_province_modifier = {
				name = orm_forts_buff
				duration = -1
				hidden = yes
			}
		}
		if = {
			limit = {
				owner = {
					has_country_flag = ned_buffed_forts_flag
					NOT = {
						full_idea_group = defensive_ideas
					}
				}
				region = low_countries_region
			}
			add_province_modifier = {
				name = ned_low_countries_fort_buff
				duration = -1
				hidden = yes
			}
		}
		else_if = {
			limit = {
				owner = {
					has_country_flag = ned_buffed_forts_flag
					full_idea_group = defensive_ideas
				}
				region = low_countries_region
			}
			add_province_modifier = {
				name = ned_low_countries_fort_buff_buffed
				duration = -1
				hidden = yes
			}
		}
		if = {
			limit = {
				owner = {
					has_country_flag = ven_defensive_reward_flag
				}
				NOT = {
					has_province_modifier = ven_defensive_stance_modifier
				}
			}
			add_province_modifier = {
				name = ven_defensive_stance_modifier
				duration = -1
				hidden = yes
			}
		}
		if = {
			limit = {
				owner = {
					has_estate_privilege = estate_nobles_vegvar_system
				}
				any_neighbor_province = {
					NOT = {
						owned_by = ROOT
					}
				}
			}
			add_province_modifier = {
				name = estate_nobles_vegvar_system_modifier
				duration = -1
			}
		}
	}
	# THIS = Province, FROM = Destroyer, Will not be called on buildings made obsolete!
	on_destroyed = {
		#VU 3.0
		add_base_manpower = -1
		if = {
			limit = {
				has_province_modifier = estate_nobles_vegvar_system_modifier
			}
			remove_province_modifier = estate_nobles_vegvar_system_modifier
		}
		if = {
			limit = {
				has_province_modifier = estate_nobles_development_of_castles_mod
			}
			remove_province_modifier = estate_nobles_development_of_castles_mod
		}
		if = {
			limit = {
				has_province_modifier = ven_defensive_stance_modifier
			}
			remove_province_modifier = ven_defensive_stance_modifier
		}
		if = {
			limit = {
				has_province_modifier = orm_forts_buff
			}
			remove_province_modifier = orm_forts_buff
		}
		if = {
			limit = {
				has_province_modifier = ned_low_countries_fort_buff
			}
			remove_province_modifier = ned_low_countries_fort_buff
		}
		if = {
			limit = {
				has_province_modifier = ned_low_countries_fort_buff_buffed
			}
			remove_province_modifier = ned_low_countries_fort_buff_buffed
		}
	}
	# THIS = Province, FROM = Destroyer, Will not be called on buildings destroyed!
	on_obsolete = {
	}
	onmap = yes
	influencing_fort = yes
	ai_will_do = {
		factor = 1
		################################
		## Don's New Super-Economy AI ##
		################################
		modifier = {
			factor = 0
			OR = {
				#Never do when...
				FROM = {
					vu_don_economy_ai_never_do_when = yes
				}
				#Never build in...
				vu_don_economy_ai_never_build_in = yes
				vu_don_economy_ai_fortress_never_in = yes
			}
		}
		#Don note - both Avoids are separate, as they are supposed to stack...
		#Avoid doing when...
		modifier = {
			factor = 0.25
			FROM = {
				vu_don_economy_ai_avoid_doing_when = yes
			}
		}
		#Avoid building in...
		modifier = {
			factor = 0.25
			OR = {
				vu_don_economy_ai_fortress_avoid_in = yes
				vu_don_economy_ai_avoid_building_in = yes
			}
		}
	}
}

#Tier 2 Fortification - Bastion
fort_16th = {
	cost = 500	#VU - Increased from 400 to 500 in v1.36.2.* by San Felipe
	time = 24
	make_obsolete = fort_15th
	modifier = {
		fort_level = 2
		local_defensiveness = 0.5
		#VU 3.0
		local_fort_maintenance_modifier = 0.25
		local_governing_cost_increase = 15
		local_assault_fort_ability = -0.1
	}
	# THIS = Province, FROM = Builder(not nessecairly owner, can be overlord)
	on_built = {
		#VU 3.0
		add_base_manpower = 1
		if = {
			limit = {
				FROM = {
					NOT = {
						mil_tech = 19
					}
					has_government_attribute = on_fort_built_nobles_loyalty
				}
			}
			FROM = {
				if = {
					limit = {
						has_estate = estate_nobles
					}
					add_estate_loyalty = {
						estate = estate_nobles
						loyalty = 5
					}
				}
				if = {
					limit = {
						has_estate = estate_maratha
					}
					add_estate_loyalty = {
						estate = estate_maratha
						loyalty = 5
					}
				}
				if = {
					limit = {
						has_estate = estate_rajput
					}
					add_estate_loyalty = {
						estate = estate_rajput
						loyalty = 5
					}
				}
			}
		}
		if = {
			limit = {
				owner = {
					has_estate_privilege = estate_nobles_development_of_castles
				}
				NOT = {
					has_province_modifier = estate_nobles_development_of_castles_mod
				}
			}
			add_province_modifier = {
				name = estate_nobles_development_of_castles_mod
				duration = -1
			}
		}
	}
	# THIS = Province, FROM = Destroyer, Will not be called on buildings made obsolete!
	on_destroyed = {
		#VU 3.0
		add_base_manpower = -1
	}
	# THIS = Province, FROM = Destroyer, Will not be called on buildings destroyed!
	on_obsolete = {
		if = {
			limit = {
				has_province_modifier = estate_nobles_development_of_castles_mod
			}
			remove_province_modifier = estate_nobles_development_of_castles_mod
		}
	}
	onmap = yes
	influencing_fort = yes
	ai_will_do = {
		factor = 1
		################################
		## Don's New Super-Economy AI ##
		################################
		modifier = {
			factor = 0
			OR = {
				#Never do when...
				FROM = {
					vu_don_economy_ai_never_do_when = yes
				}
				#Never build in...
				vu_don_economy_ai_never_build_in = yes
				vu_don_economy_ai_fortress_never_in = yes
			}
		}
		#Don note - both Avoids are separate, as they are supposed to stack...
		#Avoid doing when...
		modifier = {
			factor = 0.25
			FROM = {
				vu_don_economy_ai_avoid_doing_when = yes
			}
		}
		#Avoid building in...
		modifier = {
			factor = 0.25
			OR = {
				vu_don_economy_ai_fortress_avoid_in = yes
				vu_don_economy_ai_avoid_building_in = yes
			}
		}
	}
}

#Tier 3 Fortification - Star Fort
fort_17th = {
	cost = 750	#VU - Increased from 400 to 750 in v1.36.2.* by San Felipe
	time = 36
	make_obsolete = fort_16th
	modifier = {
		fort_level = 3
		local_defensiveness = 0.75
		#VU 3.0
		local_fort_maintenance_modifier = 0.5
		local_governing_cost_increase = 20
		local_assault_fort_ability = -0.15
	}
	# THIS = Province, FROM = Builder(not nessecairly owner, can be overlord)
	on_built = {
		#VU 3.0
		add_base_manpower = 1
		if = {
			limit = {
				FROM = {
					NOT = {
						mil_tech = 19
					}
					has_government_attribute = on_fort_built_nobles_loyalty
				}
			}
			FROM = {
				if = {
					limit = {
						has_estate = estate_nobles
					}
					add_estate_loyalty = {
						estate = estate_nobles
						loyalty = 5
					}
				}
				if = {
					limit = {
						has_estate = estate_maratha
					}
					add_estate_loyalty = {
						estate = estate_maratha
						loyalty = 5
					}
				}
				if = {
					limit = {
						has_estate = estate_rajput
					}
					add_estate_loyalty = {
						estate = estate_rajput
						loyalty = 5
					}
				}
			}
		}
		if = {
			limit = {
				owner = {
					has_estate_privilege = estate_nobles_development_of_castles
				}
				NOT = {
					has_province_modifier = estate_nobles_development_of_castles_mod
				}
			}
			add_province_modifier = {
				name = estate_nobles_development_of_castles_mod
				duration = -1
			}
		}
	}
	# THIS = Province, FROM = Destroyer, Will not be called on buildings made obsolete!
	on_destroyed = {
		#VU 3.0
		add_base_manpower = -1
		if = {
			limit = {
				has_province_modifier = estate_nobles_development_of_castles_mod
			}
			remove_province_modifier = estate_nobles_development_of_castles_mod
		}
	}
	# THIS = Province, FROM = Destroyer, Will not be called on buildings destroyed!
	on_obsolete = {
	}
	onmap = yes
	influencing_fort = yes
	ai_will_do = {
		factor = 1
		################################
		## Don's New Super-Economy AI ##
		################################
		modifier = {
			factor = 0
			OR = {
				#Never do when...
				FROM = {
					vu_don_economy_ai_never_do_when = yes
				}
				#Never build in...
				vu_don_economy_ai_never_build_in = yes
				vu_don_economy_ai_fortress_never_in = yes
			}
		}
		#Don note - both Avoids are separate, as they are supposed to stack...
		#Avoid doing when...
		modifier = {
			factor = 0.25
			FROM = {
				vu_don_economy_ai_avoid_doing_when = yes
			}
		}
		#Avoid building in...
		modifier = {
			factor = 0.25
			OR = {
				vu_don_economy_ai_fortress_avoid_in = yes
				vu_don_economy_ai_avoid_building_in = yes
			}
		}
	}
}

#Tier 4 Fortification - Fortress
fort_18th = {
	cost = 1000	#VU - Increased from 800 to 1000 in v1.36.2.* by San Felipe
	time = 48
	#VU AddOn cost changed from original 800
	#Time changed from 72 to 96 so fort levels are 1y, 2y, 3y and 4y respectively.
	make_obsolete = fort_17th
	modifier = {
		fort_level = 5
		local_defensiveness = 1
		#VU 3.0
		local_fort_maintenance_modifier = 0.75
		local_governing_cost_increase = 25
		local_assault_fort_ability = -0.2
	}
	# THIS = Province, FROM = Builder(not nessecairly owner, can be overlord)
	on_built = {
		#VU 3.0
		add_base_manpower = 1
		if = {
			limit = {
				FROM = {
					has_government_attribute = on_fort_built_nobles_loyalty
				}
			}
			FROM = {
				if = {
					limit = {
						has_estate = estate_nobles
					}
					add_estate_loyalty = {
						estate = estate_nobles
						loyalty = 5
					}
				}
				if = {
					limit = {
						has_estate = estate_maratha
					}
					add_estate_loyalty = {
						estate = estate_maratha
						loyalty = 5
					}
				}
				if = {
					limit = {
						has_estate = estate_rajput
					}
					add_estate_loyalty = {
						estate = estate_rajput
						loyalty = 5
					}
				}
			}
		}
		if = {
			limit = {
				owner = {
					has_estate_privilege = estate_nobles_development_of_castles
				}
				NOT = {
					has_province_modifier = estate_nobles_development_of_castles_mod
				}
			}
			add_province_modifier = {
				name = estate_nobles_development_of_castles_mod
				duration = -1
			}
		}
	}
	# THIS = Province, FROM = Destroyer, Will not be called on buildings made obsolete!
	on_destroyed = {
		#VU 3.0
		add_base_manpower = -1
		if = {
			limit = {
				has_province_modifier = estate_nobles_development_of_castles_mod
			}
			remove_province_modifier = estate_nobles_development_of_castles_mod
		}
	}
	# THIS = Province, FROM = Destroyer, Will not be called on buildings destroyed!
	on_obsolete = {
	}
	onmap = yes
	influencing_fort = yes
	ai_will_do = {
		factor = 1
		################################
		## Don's New Super-Economy AI ##
		################################
		modifier = {
			factor = 0
			OR = {
				#Never do when...
				FROM = {
					vu_don_economy_ai_never_do_when = yes
				}
				#Never build in...
				vu_don_economy_ai_never_build_in = yes
				vu_don_economy_ai_fortress_never_in = yes
			}
		}
		#Don note - both Avoids are separate, as they are supposed to stack...
		#Avoid doing when...
		modifier = {
			factor = 0.25
			FROM = {
				vu_don_economy_ai_avoid_doing_when = yes
			}
		}
		#Avoid building in...
		modifier = {
			factor = 0.25
			OR = {
				vu_don_economy_ai_fortress_avoid_in = yes
				vu_don_economy_ai_avoid_building_in = yes
			}
		}
	}
}

################################################
### MANUFACTORY
manufactory = {
	cost = 500
	time = 24	#VU AddOn changed from 60. 5 year construction times are way out of line with all other buildings, and quite unneccessary, I think. Reducing this to comparable with other buildings.
	modifier = {
		trade_goods_size = 0.4
		trade_goods_size_modifier = 0.25
		#VU 3.0 Manufactory
		local_governing_cost_increase = 10
	}
}

#If trade good assignment changes, also update scripted trigger "has_manufactory trigger"!
wharf = {
	manufactory = {
		salt
		fish
		naval_supplies
		tropical_wood
		seafood
		tar
	}
	modifier = {
		trade_goods_size = 0.4		#VU Addon Note - Alright, alright. I'm giving in. It makes no sense, but vanilla apparently didn't bother to code in compatibility with the modifier version, so I have little choice but to give a flat bonus here.
		trade_goods_size_modifier = 0.25		#VU AddOn changed from flat trade good size increase. Logic above at the top of Manufactories entries.
		naval_forcelimit = 1		#VU AddOn new - Just a fun little new bonus
		#VU 3.0 Manufactory
		local_governing_cost_increase = 10
	}
	keep_trigger = {
		OR = {
			trade_goods = fish
			trade_goods = naval_supplies
			trade_goods = salt
			trade_goods = seafood
			trade_goods = tar
			trade_goods = tropical_wood
		}
	}
	onmap = yes
	on_built = {
		add_development_from_building = {
			building = manufactory
			type = production
			value = 2
		}
		add_dev_from_building = {
			building = manufactory
			type = production
			value = 1
		}
	}
	on_destroyed = {
		remove_development_from_building = {
			building = manufactory
			type = production
			value = 2
		}
		remove_dev_from_building = {
			building = manufactory
			type = production
			value = 1
		}
	}
	on_obsolete = {
	}
	ai_will_do = {
		factor = 1
		################################
		## Don's New Super-Economy AI ##
		################################
		modifier = {
			factor = 0
			OR = {
				#Never do when...
				FROM = {
					vu_don_economy_ai_never_do_when = yes
				}
				#Never build in...
				vu_don_economy_ai_never_build_in = yes
			}
		}
		#Don note - both Avoids are separate, as they are supposed to stack...
		#Avoid doing when...
		modifier = {
			factor = 0.25
			FROM = {
				vu_don_economy_ai_avoid_doing_when = yes
			}
		}
		#Avoid building in...
		modifier = {
			factor = 0.25
			vu_don_economy_ai_avoid_building_in = yes
		}
	}
}

weapons = {
	manufactory = {
		copper
		iron
		lead
		mercury
		tin
		metalworking
		munitions
		zinc
		cannon
	}
	modifier = {
		trade_goods_size = 0.4		#VU Addon Note - Alright, alright. I'm giving in. It makes no sense, but vanilla apparently didn't bother to code in compatibility with the modifier version, so I have little choice but to give a flat bonus here.
		trade_goods_size_modifier = 0.25		#VU AddOn changed from flat trade good size increase. Logic above at the top of Manufactories entries.
		land_forcelimit = 0.5		#VU AddOn new - Just a fun little new bonus
		#VU 3.0 Manufactory
		local_governing_cost_increase = 10
	}
	onmap = yes
	on_built = {
		add_development_from_building = {
			building = manufactory
			type = production
			value = 2
		}
		add_dev_from_building = {
			building = manufactory
			type = manpower
			value = 1
		}
	}
	on_destroyed = {
		remove_development_from_building = {
			building = manufactory
			type = production
			value = 2
		}
		remove_dev_from_building = {
			building = manufactory
			type = manpower
			value = 1
		}
	}
	on_obsolete = {
	}
	keep_trigger = {
		OR = {
			trade_goods = cannon
			trade_goods = copper
			trade_goods = iron
			trade_goods = lead
			trade_goods = mercury
			trade_goods = metalworking
			trade_goods = munitions
			trade_goods = tin
			trade_goods = zinc
		}
	}
	ai_will_do = {
		factor = 1
		################################
		## Don's New Super-Economy AI ##
		################################
		modifier = {
			factor = 0
			OR = {
				#Never do when...
				FROM = {
					vu_don_economy_ai_never_do_when = yes
				}
				#Never build in...
				vu_don_economy_ai_never_build_in = yes
			}
		}
		#Don note - both Avoids are separate, as they are supposed to stack...
		#Avoid doing when...
		modifier = {
			factor = 0.25
			FROM = {
				vu_don_economy_ai_avoid_doing_when = yes
			}
		}
		#Avoid building in...
		modifier = {
			factor = 0.25
			vu_don_economy_ai_avoid_building_in = yes
		}
	}
}

textile = {
	manufactory = {
		wool
		cloth
		silk
		books
		dyes
		indigo
		uniforms
		lace
	}
	modifier = {
		trade_goods_size = 0.4		#VU Addon Note - Alright, alright. I'm giving in. It makes no sense, but vanilla apparently didn't bother to code in compatibility with the modifier version, so I have little choice but to give a flat bonus here.
		trade_goods_size_modifier = 0.25		#VU AddOn changed from flat trade good size increase. Logic above at the top of Manufactories entries.
		local_tax_modifier = 0.25		#VU AddOn new - Just a fun little new bonus
		#VU 3.0 Manufactory
		local_governing_cost_increase = 10
	}
	onmap = yes
	on_built = {
		add_development_from_building = {
			building = manufactory
			type = production
			value = 2
		}
		add_dev_from_building = {
			building = manufactory
			type = production
			value = 1
		}
	}
	on_destroyed = {
		remove_development_from_building = {
			building = manufactory
			type = production
			value = 2
		}
		remove_dev_from_building = {
			building = manufactory
			type = production
			value = 1
		}
	}
	on_obsolete = {
	}
	keep_trigger = {
		OR = {
			trade_goods = books
			trade_goods = cloth
			trade_goods = dyes
			trade_goods = indigo
			trade_goods = silk
			trade_goods = uniforms
			trade_goods = wool
			trade_goods = lace
		}
	}
	ai_will_do = {
		factor = 1
		################################
		## Don's New Super-Economy AI ##
		################################
		modifier = {
			factor = 0
			OR = {
				#Never do when...
				FROM = {
					vu_don_economy_ai_never_do_when = yes
				}
				#Never build in...
				vu_don_economy_ai_never_build_in = yes
			}
		}
		#Don note - both Avoids are separate, as they are supposed to stack...
		#Avoid doing when...
		modifier = {
			factor = 0.25
			FROM = {
				vu_don_economy_ai_avoid_doing_when = yes
			}
		}
		#Avoid building in...
		modifier = {
			factor = 0.25
			vu_don_economy_ai_avoid_building_in = yes
		}
	}
}

plantations = {
	manufactory = {
		coffee
		cotton
		sugar
		tobacco
		tea
		cocoa
		palm_oil
		saffron
		cinnamon
		cloves
		opium
		dates
		vanilla
		nutmeg
		chocolate
	}
	modifier = {
		#Changed for VU: With different effects of slaves/indentured servants the plantation gets better and better
		#As I don't know how it interacts if the same modifier is 2 times active, I have added them together within the if-clause -Lord_Bowser
		trade_goods_size = 0.4		#VU Addon Note - Alright, alright. I'm giving in. It makes no sense, but vanilla apparently didn't bother to code in compatibility with the modifier version, so I have little choice but to give a flat bonus here.
		trade_goods_size_modifier = 0.25		#VU AddOn changed from flat trade good size increase. Logic above at the top of Manufactories entries.
		local_production_efficiency = 0.25		#VU AddOn new - Just a fun little new bonus
		#VU 3.0 Manufactory
		local_governing_cost_increase = 10
	}
	onmap = yes
	on_built = {
		add_development_from_building = {
			building = manufactory
			type = production
			value = 2
		}
		add_dev_from_building = {
			building = manufactory
			type = production
			value = 1
		}
	}
	on_destroyed = {
		remove_development_from_building = {
			building = manufactory
			type = production
			value = 2
		}
		remove_dev_from_building = {
			building = manufactory
			type = production
			value = 1
		}
	}
	on_obsolete = {
	}
	keep_trigger = {
		OR = {
			trade_goods = chocolate
			trade_goods = cinnamon
			trade_goods = cloves
			trade_goods = cocoa
			trade_goods = coffee
			trade_goods = cotton
			trade_goods = dates
			trade_goods = nutmeg
			trade_goods = opium
			trade_goods = palm_oil
			trade_goods = saffron
			trade_goods = sugar
			trade_goods = tea
			trade_goods = tobacco
			trade_goods = vanilla
		}
	}
	ai_will_do = {
		factor = 1
		################################
		## Don's New Super-Economy AI ##
		################################
		modifier = {
			factor = 0
			OR = {
				#Never do when...
				FROM = {
					vu_don_economy_ai_never_do_when = yes
				}
				#Never build in...
				vu_don_economy_ai_never_build_in = yes
			}
		}
		#Don note - both Avoids are separate, as they are supposed to stack...
		#Avoid doing when...
		modifier = {
			factor = 0.25
			FROM = {
				vu_don_economy_ai_avoid_doing_when = yes
			}
		}
		#Avoid building in...
		modifier = {
			factor = 0.25
			vu_don_economy_ai_avoid_building_in = yes
		}
	}
}

tradecompany = {
	manufactory = {
		beer
		canned_goods
		carpet
		cheese
		cider
		cigars
		cloves
		exotic_animals
		exotic_fur
		fur
		fur_clothing
		gunpowder
		incense
		ivory
		jade
		jade_sculptures
		jewellery
		leather
		maple_syrup
		marble
		marble_sculpture
		rum
		sea_turtle
		slaves
		spices
		String_Instruments
		sulfur
		sweet_confectioneries
		whaling
		woodworking
	}
	modifier = {
		trade_goods_size = 0.4		#VU Addon Note - Alright, alright. I'm giving in. It makes no sense, but vanilla apparently didn't bother to code in compatibility with the modifier version, so I have little choice but to give a flat bonus here.
		trade_goods_size_modifier = 0.25		#VU AddOn changed from flat trade good size increase. Logic above at the top of Manufactories entries.
		province_trade_power_modifier = 0.5		#VU AddOn new - Just a fun little new bonus
		#VU 3.0 Manufactory
		local_governing_cost_increase = 10
	}
	onmap = yes
	on_built = {
		add_development_from_building = {
			building = manufactory
			type = production
			value = 2
		}
		add_dev_from_building = {
			building = manufactory
			type = production
			value = 1
		}
	}
	on_destroyed = {
		remove_development_from_building = {
			building = manufactory
			type = production
			value = 2
		}
		remove_dev_from_building = {
			building = manufactory
			type = production
			value = 1
		}
	}
	on_obsolete = {
	}
	keep_trigger = {
		OR = {
			trade_goods = beer
			trade_goods = canned_goods
			trade_goods = carpet
			trade_goods = cheese
			trade_goods = cider
			trade_goods = cigars
			trade_goods = cloves
			trade_goods = exotic_animals
			trade_goods = exotic_fur
			trade_goods = fur
			trade_goods = fur_clothing
			trade_goods = gunpowder
			trade_goods = incense
			trade_goods = ivory
			trade_goods = jade
			trade_goods = jade_sculptures
			trade_goods = jewellery
			trade_goods = leather
			trade_goods = maple_syrup
			trade_goods = marble
			trade_goods = marble_sculpture
			trade_goods = rum
			trade_goods = sea_turtle
			trade_goods = slaves
			trade_goods = spices
			trade_goods = String_Instruments
			trade_goods = sulfur
			trade_goods = sweet_confectioneries
			trade_goods = whaling
			trade_goods = woodworking
		}
	}
	ai_will_do = {
		factor = 1
		################################
		## Don's New Super-Economy AI ##
		################################
		modifier = {
			factor = 0
			OR = {
				#Never do when...
				FROM = {
					vu_don_economy_ai_never_do_when = yes
				}
				#Never build in...
				vu_don_economy_ai_never_build_in = yes
			}
		}
		#Don note - both Avoids are separate, as they are supposed to stack...
		#Avoid doing when...
		modifier = {
			factor = 0.25
			FROM = {
				vu_don_economy_ai_avoid_doing_when = yes
			}
		}
		#Avoid building in...
		modifier = {
			factor = 0.25
			vu_don_economy_ai_avoid_building_in = yes
		}
	}
}

farm_estate = {
	manufactory = {
		beer
		cider
		fruit
		grain
		livestock
		wine
		apiculture
		rice
		horses
		olive_oil
		camel
		elephants
		citrus
		potato
		maize
		tomato
		champagne_bottle
		llama
		millet
		vegetables		#Makes sense to have vegetables in a farm doesn't it ?
		vodka
		whiskey
		organic_soap
	}
	modifier = {
		trade_goods_size = 1		#VU Addon Note - Alright, alright. I'm giving in. It makes no sense, but vanilla apparently didn't bother to code in compatibility with the modifier version, so I have little choice but to give a flat bonus here.
		trade_goods_size_modifier = 0.5		#VU AddOn changed from flat trade good size increase. Logic above at the top of Manufactories entries.
		local_production_efficiency = 0.5		#VU AddOn new - Just a fun little new bonus
		#VU 3.0 Manufactory
		local_governing_cost_increase = 10
	}
	onmap = yes
	on_built = {
		add_development_from_building = {
			building = manufactory
			type = production
			value = 2
		}
		add_dev_from_building = {
			building = manufactory
			type = production
			value = 1
		}
		if = {
			limit = {
				FROM = {
					has_country_flag = geo_wine_manufactory_flag
				}
			}
			add_base_production = 1
		}
	}
	on_destroyed = {
		remove_development_from_building = {
			building = manufactory
			type = production
			value = 2
		}
		remove_dev_from_building = {
			building = manufactory
			type = production
			value = 1
		}
		if = {
			limit = {
				FROM = {
					has_country_flag = geo_wine_manufactory_flag
				}
			}
			add_base_production = -1
		}
	}
	on_obsolete = {
	}
	keep_trigger = {
		OR = {
			trade_goods = apiculture
			trade_goods = beer
			trade_goods = cider
			trade_goods = camel
			trade_goods = champagne_bottle
			trade_goods = citrus
			trade_goods = elephants
			trade_goods = fruit
			trade_goods = grain
			trade_goods = horses
			trade_goods = livestock
			trade_goods = llama
			trade_goods = maize
			trade_goods = olive_oil
			trade_goods = potato
			trade_goods = rice
			trade_goods = tomato
			trade_goods = vegetables			#Makes sense to have vegetables in a farm doesn't it ?
			trade_goods = vodka
			trade_goods = wine
			trade_goods = whiskey
			trade_goods = organic_soap
		}
	}
	ai_will_do = {
		factor = 1
		################################
		## Don's New Super-Economy AI ##
		################################
		modifier = {
			factor = 0
			OR = {
				#Never do when...
				FROM = {
					vu_don_economy_ai_never_do_when = yes
				}
				#Never build in...
				vu_don_economy_ai_never_build_in = yes
			}
		}
		#Don note - both Avoids are separate, as they are supposed to stack...
		#Avoid doing when...
		modifier = {
			factor = 0.25
			FROM = {
				vu_don_economy_ai_avoid_doing_when = yes
			}
		}
		#Avoid building in...
		modifier = {
			factor = 0.25
			vu_don_economy_ai_avoid_building_in = yes
		}
	}
}

mills = {
	manufactory = {
		paper
		amber
		lacquerware
		diamonds
		gems
		pearls
		tropical_wood
		glass
		coloured_stained_glass
		chinaware
		lumber
		ebony
		steam_engine
		optics
		bamboo
		pottery
	}
	modifier = {
		trade_goods_size = 0.4		#VU Addon Note - Alright, alright. I'm giving in. It makes no sense, but vanilla apparently didn't bother to code in compatibility with the modifier version, so I have little choice but to give a flat bonus here.
		trade_goods_size_modifier = 0.25		#VU AddOn changed from flat trade good size increase. Logic above at the top of Manufactories entries.
		local_tax_modifier = 0.25		#VU AddOn new - Just a fun little new bonus
		#VU 3.0 Manufactory
		local_governing_cost_increase = 10
	}
	onmap = yes
	on_built = {
		add_development_from_building = {
			building = manufactory
			type = production
			value = 2
		}
		add_dev_from_building = {
			building = manufactory
			type = production
			value = 1
		}
	}
	on_destroyed = {
		remove_development_from_building = {
			building = manufactory
			type = production
			value = 2
		}
		remove_dev_from_building = {
			building = manufactory
			type = production
			value = 1
		}
	}
	on_obsolete = {
	}
	keep_trigger = {
		OR = {
			trade_goods = amber
			trade_goods = chinaware
			trade_goods = diamonds
			trade_goods = ebony
			trade_goods = gems
			trade_goods = glass
			trade_goods = coloured_stained_glass
			trade_goods = lumber
			trade_goods = optics
			trade_goods = paper
			trade_goods = pearls
			trade_goods = steam_engine
			trade_goods = tropical_wood
			trade_goods = bamboo
			trade_goods = pottery
		}
	}
	ai_will_do = {
		factor = 1
		################################
		## Don's New Super-Economy AI ##
		################################
		modifier = {
			factor = 0
			OR = {
				#Never do when...
				FROM = {
					vu_don_economy_ai_never_do_when = yes
				}
				#Never build in...
				vu_don_economy_ai_never_build_in = yes
			}
		}
		#Don note - both Avoids are separate, as they are supposed to stack...
		#Avoid doing when...
		modifier = {
			factor = 0.25
			FROM = {
				vu_don_economy_ai_avoid_doing_when = yes
			}
		}
		#Avoid building in...
		modifier = {
			factor = 0.25
			vu_don_economy_ai_avoid_building_in = yes
		}
	}
}

furnace = {
	manufactory = {
		coal
	}
	potential = {
		has_dlc = "Rule Britannia"
	}
	modifier = {
		trade_goods_size = 1.5		#VU Addon Note - Alright, alright. I'm giving in. It makes no sense, but vanilla apparently didn't bother to code in compatibility with the modifier version, so I have little choice but to give a flat bonus here.
		trade_goods_size_modifier = 1		#VU AddOn changed from flat trade good size increase. Logic above at the top of Manufactories entries.
		global_trade_goods_size_modifier = 0.05		#VU AddOn changed from 0.05. This was just too huge, especially with all the new provinces.
		#VU 3.0 Manufactory
		local_governing_cost_increase = 10
	}
	onmap = yes
	show_separate = yes	# Means as a manufactory it will be shown according to the old way
	on_built = {
		add_development_from_building = {
			building = manufactory
			type = production
			value = 2
		}
	}
	on_destroyed = {
		remove_development_from_building = {
			building = manufactory
			type = production
			value = 2
		}
	}
	on_obsolete = {
	}
	keep_trigger = {
		trade_goods = coal
	}
	ai_will_do = {
		factor = 1
		################################
		## Don's New Super-Economy AI ##
		################################
		modifier = {
			factor = 0
			OR = {
				#Never do when...
				FROM = {
					vu_don_economy_ai_never_do_when = yes
				}
				#Never build in...
				vu_don_economy_ai_never_build_in = yes
			}
		}
		#Don note - both Avoids are separate, as they are supposed to stack...
		#Avoid doing when...
		modifier = {
			factor = 0.25
			FROM = {
				vu_don_economy_ai_avoid_doing_when = yes
			}
		}
		#Avoid building in...
		modifier = {
			factor = 0.25
			vu_don_economy_ai_avoid_building_in = yes
		}
	}
}

soldier_households = {
	manufactory = {
		all
	}
	bonus_manufactory = {
		# Will apply an extra modifier if these goods
		beer
		cider
		grain
		fish
		livestock
		wine
		apiculture
		rice
		horses
		olive_oil
		camel
		elephants
		citrus
		potato
		maize
		llama
		champagne_bottle
		millet
		vodka
		whiskey
		organic_soap
	}
	modifier = {
		local_manpower = 0.5
		land_forcelimit = 0.5
		local_regiment_cost = -0.15
		#VU 3.0 Manufactory
		local_governing_cost_increase = 10
	}
	bonus_modifier = {
		local_manpower = 0.5
		land_forcelimit = 0.5
		local_regiment_cost = -0.15
	}
	onmap = no
	show_separate = yes	# Means as a manufactory it will be shown according to the old way
	on_built = {
		add_development_from_building = {
			building = manufactory
			type = production
			value = 2
		}
		add_dev_from_building = {
			building = manufactory
			type = manpower
			value = 1
		}
		if = {
			limit = {
				FROM = {
					has_government_attribute = improved_military_buildings
				}
			}
			add_province_modifier = {
				name = wei_suo_system_reform_soldier_households_modifier
				duration = -1
			}
		}
	}
	on_destroyed = {
		remove_development_from_building = {
			building = manufactory
			type = production
			value = 2
		}
		remove_dev_from_building = {
			building = manufactory
			type = manpower
			value = 1
		}
		if = {
			limit = {
				has_province_modifier = wei_suo_system_reform_soldier_households_modifier
			}
			remove_province_modifier = wei_suo_system_reform_soldier_households_modifier
		}
	}
	on_obsolete = {
	}
	ai_will_do = {
		factor = 1
		################################
		## Don's New Super-Economy AI ##
		################################
		modifier = {
			factor = 0
			OR = {
				#Never do when...
				FROM = {
					vu_don_economy_ai_never_do_when = yes
				}
				#Never build in...
				vu_don_economy_ai_never_build_in = yes
			}
		}
		#Don note - both Avoids are separate, as they are supposed to stack...
		#Avoid doing when...
		modifier = {
			factor = 0.25
			FROM = {
				vu_don_economy_ai_avoid_doing_when = yes
			}
		}
		#Avoid building in...
		modifier = {
			factor = 0.25
			vu_don_economy_ai_avoid_building_in = yes
		}
		######################
		## Manpower Specific #
		######################
		modifier = {
			factor = 2
			FROM = {
				vu_don_economy_ai_manpower_when = yes
			}
		}
		modifier = {
			factor = 2
			vu_don_economy_ai_manpower_in = yes
		}
	}
}

ramparts = {
	manufactory = {
		all
	}
	modifier = {
		local_hostile_attrition = 0.5
		local_defensiveness = 0.15
		local_defender_dice_roll_bonus = 1
		#VU 3.0 Manufactory
		local_governing_cost_increase = 10
	}
	onmap = no
	show_separate = yes	# Means as a manufactory it will be shown according to the old way
	on_built = {
		add_dev_from_building = {
			building = manufactory
			type = manpower
			value = 1
		}
		if = {
			limit = {
				owner = {
					has_estate_privilege = estate_nobles_development_of_castles
				}
				NOT = {
					has_province_modifier = estate_nobles_development_of_castles_ramparts_mod
				}
			}
			add_province_modifier = {
				name = estate_nobles_development_of_castles_ramparts_mod
				duration = -1
			}
		}
	}
	on_destroyed = {
		if = {
			limit = {
				has_province_modifier = per_reinforced_defenses
			}
			remove_province_modifier = per_reinforced_defenses
		}
		remove_dev_from_building = {
			building = manufactory
			type = manpower
			value = 1
		}
		if = {
			limit = {
				has_province_modifier = estate_nobles_development_of_castles_ramparts_mod
			}
			remove_province_modifier = estate_nobles_development_of_castles_ramparts_mod
		}
	}
	ai_will_do = {
		factor = 1
		################################
		## Don's New Super-Economy AI ##
		################################
		modifier = {
			factor = 0
			OR = {
				#Never do when...
				FROM = {
					vu_don_economy_ai_never_do_when = yes
				}
				#Never build in...
				vu_don_economy_ai_never_build_in = yes
				vu_don_economy_ai_fortress_never_in = yes
			}
		}
		#Don note - both Avoids are separate, as they are supposed to stack...
		#Avoid doing when...
		modifier = {
			factor = 0.25
			FROM = {
				vu_don_economy_ai_avoid_doing_when = yes
			}
		}
		#Avoid building in...
		modifier = {
			factor = 0.25
			OR = {
				vu_don_economy_ai_fortress_avoid_in = yes
				vu_don_economy_ai_avoid_building_in = yes
			}
		}
	}
}

impressment_offices = {
	manufactory = {
		all
	}
	bonus_manufactory = {
		# Will apply an extra modifier if these goods
		salt
		beer
		cider
		fish
		lumber
		naval_supplies
		tropical_wood
		seafood
		tar
	}
	build_trigger = {
		has_port = yes
	}
	modifier = {
		local_sailors = 150
		ship_recruit_speed = -0.1
		local_ship_cost = -0.05
		#VU 3.0 Manufactory
		local_governing_cost_increase = 10
	}
	bonus_modifier = {
		local_sailors = 150
		ship_recruit_speed = -0.1
		local_ship_cost = -0.05
	}
	onmap = no
	show_separate = yes	# Means as a manufactory it will be shown according to the old way
	on_built = {
		add_development_from_building = {
			building = impressment_offices
			type = manpower
			value = 2
		}
		add_dev_from_building = {
			building = impressment_offices
			type = manpower
			value = 1
		}
	}
	on_destroyed = {
		remove_development_from_building = {
			building = impressment_offices
			type = manpower
			value = 2
		}
		remove_dev_from_building = {
			building = impressment_offices
			type = manpower
			value = 1
		}
	}
	on_obsolete = {
	}
	ai_will_do = {
		factor = 1
		################################
		## Don's New Super-Economy AI ##
		################################
		modifier = {
			factor = 0
			OR = {
				#Never do when...
				FROM = {
					vu_don_economy_ai_never_do_when = yes
				}
				#Never build in...
				vu_don_economy_ai_never_build_in = yes
			}
		}
		#Don note - both Avoids are separate, as they are supposed to stack...
		#Avoid doing when...
		modifier = {
			factor = 0.25
			FROM = {
				vu_don_economy_ai_avoid_doing_when = yes
			}
		}
		#Avoid building in...
		modifier = {
			factor = 0.25
			vu_don_economy_ai_avoid_building_in = yes
		}
		####################
		## Sailor Specific #
		####################
		modifier = {
			factor = 2
			FROM = {
				vu_don_economy_ai_sailors_when = yes
			}
		}
		modifier = {
			factor = 2
			vu_don_economy_ai_sailors_in = yes
		}
	}
}

state_house = {
	manufactory = {
		all
	}
	bonus_manufactory = {
		# Will apply an extra modifier if these goods
		paper
		gems
		tropical_wood
		glass
		coloured_stained_glass
		chinaware
		diamonds
		marble
		gems
		jade
		jewellery
		lumber
		ebony
		amber
		steam_engine
		optics
	}
	build_trigger = {
		NOT = {
			area_for_scope_province = {
				owner = {
					tag = ROOT
				}
				OR = {
					has_building = state_house
					has_construction = state_house
				}
			}
		}
	}
	keep_trigger = {
		NOT = {
			area_for_scope_province = {
				NOT = {
					province_id = root
				}
				owner = {
					tag = ROOT
				}
				OR = {
					has_building = state_house
					has_construction = state_house
				}
			}
		}
	}
	modifier = {
		statewide_governing_cost = -0.2
		min_local_autonomy = -5
		local_governing_cost = -0.15
		#VU 3.0 Manufactory
		local_governing_cost_increase = 10
	}
	bonus_modifier = {
		statewide_governing_cost = -0.2
		min_local_autonomy = -5
		local_governing_cost = -0.15
	}
	onmap = no
	show_separate = yes	# Means as a manufactory it will be shown according to the old way
	on_built = {
		add_development_from_building = {
			building = state_house
			type = tax
			value = 2
		}
	}
	on_destroyed = {
		remove_development_from_building = {
			building = state_house
			type = tax
			value = 2
		}
	}
	on_obsolete = {
	}
	ai_will_do = {
		factor = 1
		################################
		## Don's New Super-Economy AI ##
		################################
		modifier = {
			factor = 0
			OR = {
				#Never do when...
				FROM = {
					vu_don_economy_ai_never_do_when = yes
				}
				#Never build in...
				vu_don_economy_ai_never_build_in = yes
			}
		}
		#Don note - both Avoids are separate, as they are supposed to stack...
		#Avoid doing when...
		modifier = {
			factor = 0.25
			FROM = {
				vu_don_economy_ai_avoid_doing_when = yes
			}
		}
		#Avoid building in...
		modifier = {
			factor = 0.25
			vu_don_economy_ai_avoid_building_in = yes
		}
		########################
		## Government Specific #
		########################
		modifier = {
			factor = 5
			FROM = {
				vu_don_economy_ai_government_when = yes
			}
		}
	}
}

oil_well = {
	manufactory = {
		oil
	}
	potential = {
		has_dlc = "Rule Britannia"
	}
	keep_trigger = {
		trade_goods = oil
	}
	modifier = {
		trade_goods_size = 0.4		#VU Addon Note - Alright, alright. I'm giving in. It makes no sense, but vanilla apparently didn't bother to code in compatibility with the modifier version, so I have little choice but to give a flat bonus here.
		trade_goods_size_modifier = 0.25		#VU AddOn changed from flat trade good size increase. Logic above at the top of Manufactories entries.
		#monthly_splendor = 0.25		#VU AddOn new - Just a fun little new bonus #NO -Don
		#VU 3.0 Manufactory
		local_governing_cost_increase = 10
	}
	onmap = yes
	show_separate = yes	# Means as a manufactory it will be shown according to the old way
	ai_will_do = {
		factor = 1
		################################
		## Don's New Super-Economy AI ##
		################################
		modifier = {
			factor = 0
			OR = {
				#Never do when...
				FROM = {
					vu_don_economy_ai_never_do_when = yes
				}
				#Never build in...
				vu_don_economy_ai_never_build_in = yes
			}
		}
		#Don note - both Avoids are separate, as they are supposed to stack...
		#Avoid doing when...
		modifier = {
			factor = 0.25
			FROM = {
				vu_don_economy_ai_avoid_doing_when = yes
			}
		}
		#Avoid building in...
		modifier = {
			factor = 0.25
			vu_don_economy_ai_avoid_building_in = yes
		}
	}
}

################################################
### FORTIFICATION
#Tier 1 Fortification - Trench
#trench = {
#	cost = 50
#	time = 2
#	#Not possible to build a trench if the province already has a fort.
#	build_trigger = {
#		NOT = {
#			OR = {
#				has_building = fort_15th
#				has_building = fort_16th
#				has_building = fort_17th
#				has_building = fort_18th
#			}
#		}
#	}
#	modifier = {
#		#Trench is equal in defense to a Bastion (Tier 2 Fort) with the exception of not reducing unrest.
#		fort_level = 2
#		local_defensiveness = 0.5
#		#Trenches weren't like buildings that took space near city centers, so costing building slots doesn't really suit them.
#		allowed_num_of_buildings = 1
#		#While many died in trenches due to warfare, deaths caused by their terrible conditions (disease) were just as common.
#		attrition = 10
#		max_attrition = 10
#		#To avoid making a trench be just like a fort but cheaper and faster, they're devastating to the development of provinces.
#		local_monthly_devastation = 0.5
#		local_development_cost = 0.5
#	}
#	onmap = yes
#	influencing_fort = yes
#	ai_will_do = {
#		factor = 1
#		modifier = {
#			factor = 0
#			NOT = {
#				any_neighbor_province = {
#					NOT = {
#						controller = {
#							tag = ROOT
#						}
#					}
#				}
#			}
#		}
#		#AI will only be build during a war
#		modifier = {
#			factor = 0
#			owner = {
#				is_at_war = no
#			}
#		}
#		#AI will build in provinces that border enemy or occupied provinces
#		modifier = {
#			factor = 2
#			any_neighbor_province = {
#				controller = {
#					war_with = ROOT
#				}
#			}
#		}
#	}
#}