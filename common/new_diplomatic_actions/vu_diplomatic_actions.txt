#Sending:
vu_send_administrative_bureaucrats_for_ADM = {
    category = economy

    require_acceptance = yes #Set to no so that this is a player to player and or ai interaction. - SF

    is_visible = {
        ROOT = {
            ai = no
        }
    }
    is_allowed = {
        ROOT = {
            adm_power = 25
            has_opinion = { #This is opinion of sender towards receiver
                who = FROM
                value = 25
            }
        }
        FROM = {
            owes_favors = {
                who = ROOT
                value = 10
            }
        }
        NOT = { #Don addition
            has_country_flag = vu_send_administrative_bureaucrats_for_adm_flag
        }
        if = { #Don addition
            limit = {
                has_country_flag = vu_send_administrative_bureaucrats_for_adm_cooldown_flag
            }
            had_country_flag = { #Is the effect
                flag = vu_send_administrative_bureaucrats_for_adm_cooldown_flag
                days = 1825
            }
        }
    }
    on_accept = {
        clr_country_flag = vu_send_administrative_bureaucrats_for_adm_cooldown_flag #Don addition
        set_country_flag = vu_send_administrative_bureaucrats_for_adm_flag
        set_country_flag = vu_send_administrative_bureaucrats_for_adm_cooldown_flag #Don addition
        clr_country_flag = vu_send_diplomatic_envoys_for_dip_flag
        clr_country_flag = vu_send_military_attaches_for_mil_flag
        #Yeeted ROOT because it is already in ROOT
        add_adm_power = -25
        add_treasury = -10   #State paid transportation fees for the Bureaucrats.
        add_favors = {
            who = FROM
            amount = 10
        }
        add_opinion = {
            who = FROM
            modifier = sought_25_bureaucratic_adm_points
        }
        FROM = {
            add_adm_power = 25
            add_favors = {
                who = ROOT
                amount = -10
            }
            add_trust = {
                who = ROOT
                value = 5
            }
            add_opinion = {
                who = ROOT
                modifier = provided_25_bureaucratic_adm_points
            }
        }
    }
    on_decline = {
        add_prestige = -10
        add_treasury = 10   #Reimbursement of state paid transportation fees for the Bureaucrats.
    }

    ai_acceptance = {
        add_entry = {
            name = Don_is_a_TWAT

            # Restricts this entry to the countries that validate the triggers. Optional.
            #limit = {
            #    always = yes
            #}

            export_to_variable = {
                variable_name = ai_value
                value = modifier:diplomatic_reputation
                who = FROM
                with = THIS
            }

            # You can then change ai_value with effects such as multiply_variable, etc
        }
    }

    ai_will_do = { #Ai stuff by DonBrom
        alliance_with = FROM
        trust = {
            who = FROM
            value = 70
        }
        has_opinion = {
            who = FROM
            value = 150
        }
        treasury = 250
        is_at_war = no
        has_any_disaster = no
        is_in_deficit = no
        is_month = 11 #Don's a genius and I love it! December = Winter is coming. :P
        adm_power = 750
        is_great_power = yes #Another Don addition - If you're a shitty tag then forget it! xD
        FROM = {
            ai = no
            is_subject = no #Another Don addition - Subjects don't get it! xD
            is_great_power = no # xD
            OR = {
                is_at_war = yes
                has_any_disaster = yes
            }
        }
    }
}

vu_send_diplomatic_envoys_for_DIP = {
    category = economy

    require_acceptance = yes #Set to no so that this is a player to player and or ai interaction. - SF

    is_visible = {
        ROOT = {
            ai = no
        }
    }
    is_allowed = {
        ROOT = {
            dip_power = 25
            diplomatic_reputation = 1 #Prussia contribution - SF
            has_opinion = { #This is opinion of sender towards receiver
                who = FROM
                value = 25
            }
        }
        FROM = {
            owes_favors = {
                who = ROOT
                value = 10
            }
        }
        NOT = { #Don addition
            has_country_flag = vu_send_diplomatic_envoys_for_dip_flag
        }
        if = { #Don addition
            limit = {
                has_country_flag = vu_send_diplomatic_envoys_for_dip_cooldown_flag
            }
            had_country_flag = { #Is the effect
                flag = vu_send_diplomatic_envoys_for_dip_cooldown_flag
                days = 1825
            }
        }
    }
    on_accept = {
        clr_country_flag = vu_send_diplomatic_envoys_for_dip_cooldown_flag #Don addition
        set_country_flag = vu_send_diplomatic_envoys_for_dip_flag
        set_country_flag = vu_send_diplomatic_envoys_for_dip_cooldown_flag #Don addition
        clr_country_flag = vu_send_administrative_bureaucrats_for_adm_flag
        clr_country_flag = vu_send_military_attaches_for_mil_flag
        #Yeeted ROOT because it is already in ROOT
        add_dip_power = -25
        add_treasury = -10   #State paid transportation fees for the Envoys.
        add_favors = {
            who = FROM
            amount = 10
        }
        add_opinion = {
            who = FROM
            modifier = sought_25_diplomatic_dip_points
        }
        FROM = {
            add_dip_power = 25
            add_favors = {
                who = ROOT
                amount = -10
            }
            add_trust = {
                who = ROOT
                value = 5
            }
            add_opinion = {
                who = ROOT
                modifier = provided_25_diplomatic_dip_points
            }

        }
    }
    on_decline = {
        add_prestige = -10
        add_treasury = 10   #Reimbursement of state paid transportation fees for the Envoys.
    }

    ai_acceptance = {
        add_entry = {
            name = Don_is_a_TWAT

            # Restricts this entry to the countries that validate the triggers. Optional.
            #limit = {
            #    always = yes
            #}

            export_to_variable = {
                variable_name = ai_value
                value = modifier:diplomatic_reputation
                who = FROM
                with = THIS
            }

            # You can then change ai_value with effects such as multiply_variable, etc
        }
    }

    ai_will_do = { #Ai stuff by DonBrom
        alliance_with = FROM
        trust = {
            who = FROM
            value = 70
        }
        has_opinion = {
            who = FROM
            value = 150
        }
        treasury = 250
        is_at_war = no
        has_any_disaster = no
        is_in_deficit = no
        is_month = 11 #Don's a genius and I love it! December = Winter is coming. :P
        dip_power = 750
        is_great_power = yes #Another Don addition - If you're a shitty tag then forget it! xD
        FROM = {
            ai = no
            is_subject = no #Another Don addition - Subjects don't get it! xD
            is_great_power = no # xD
            OR = {
                is_at_war = yes
                has_any_disaster = yes
            }
        }
    }
}

vu_send_military_attaches_for_MIL = {
    category = economy

    require_acceptance = yes #Set to no so that this is a player to player and or ai interaction. - SF

    is_visible = {
        ROOT = {
            ai = no
        }
    }
    is_allowed = {
        ROOT = {
            mil_power = 25
            OR = {
                army_tradition = 10 #Prussia contribution - SF
                navy_tradition = 10 #Prussia contribution - SF
            }
            has_opinion = { #This is opinion of sender towards receiver
                who = FROM
                value = 25
            }
        }
        FROM = {
            owes_favors = {
                who = ROOT
                value = 10
            }
        }
        NOT = { #Don addition
            has_country_flag = vu_send_military_attaches_for_mil_flag
        }
        if = { #Don addition
            limit = {
                has_country_flag = vu_send_military_attaches_for_mil_cooldown_flag
            }
            had_country_flag = { #Is the effect
                flag = vu_send_military_attaches_for_mil_cooldown_flag
                days = 1825
            }
        }
    }
    on_accept = {
        clr_country_flag = vu_send_military_attaches_for_mil_cooldown_flag #Don addition
        set_country_flag = vu_send_military_attaches_for_mil_flag
        set_country_flag = vu_send_military_attaches_for_mil_cooldown_flag #Don addition
        clr_country_flag = vu_send_administrative_bureaucrats_for_adm_flag
        clr_country_flag = vu_send_diplomatic_envoys_for_dip_flag
        #Yeeted ROOT because it is already in ROOT
        add_mil_power = -25
        add_treasury = -10   #State paid transportation fees for the Attaches.
        add_favors = {
            who = FROM
            amount = 10
        }
        add_opinion = {
            who = FROM
            modifier = sought_25_military_mil_points
        }
        FROM = {
            add_mil_power = 25
            add_favors = {
                who = ROOT
                amount = -10
            }
            add_trust = {
                who = ROOT
                value = 5
            }
            add_opinion = {
                who = ROOT
                modifier = provided_25_military_mil_points
            }

        }
    }
    on_decline = {
        add_prestige = -10
        add_treasury = 10   #Reimbursement of state paid transportation fees for the Attaches.
    }

    ai_acceptance = {
        add_entry = {
            name = Don_is_a_TWAT

            # Restricts this entry to the countries that validate the triggers. Optional.
            #limit = {
            #    always = yes
            #}

            export_to_variable = {
                variable_name = ai_value
                value = modifier:diplomatic_reputation
                who = FROM
                with = THIS
            }

            # You can then change ai_value with effects such as multiply_variable, etc
        }
    }

    ai_will_do = { #Ai stuff by DonBrom
        alliance_with = FROM
        trust = {
            who = FROM
            value = 70
        }
        has_opinion = {
            who = FROM
            value = 150
        }
        treasury = 250
        is_at_war = no
        has_any_disaster = no
        is_in_deficit = no
        is_month = 11 #Don's a genius and I love it! December = Winter is coming. :P
        mil_power = 750
        is_great_power = yes #Another Don addition - If you're a shitty tag then forget it! xD
        FROM = {
            ai = no
            is_subject = no #Another Don addition - Subjects don't get it! xD
            is_great_power = no # xD
            OR = {
                is_at_war = yes
                has_any_disaster = yes
            }
        }
    }
}

#Requesting:
vu_request_administrative_bureaucrats_for_ADM = {
    category = economy

    require_acceptance = yes #Set to no so that this is a player to player and or ai interaction. - SF

    is_visible = {
        ROOT = {
            ai = no
        }
    }

    is_allowed = {
        FROM = { #This is for receiving
            adm_power = 25
            has_opinion = { #This is opinion of receiver towards sender
                who = ROOT
                value = 25
            }
        }
        ROOT = {
            owes_favors = {
                who = FROM
                value = 10
            }
        }
        NOT = { #Don addition
            has_country_flag = vu_request_administrative_bureaucrats_for_adm_flag
        }
        if = { #Don addition
            limit = {
                has_country_flag = vu_request_administrative_bureaucrats_for_adm_cooldown_flag
            }
            had_country_flag = { #Is the effect
                flag = vu_request_administrative_bureaucrats_for_adm_cooldown_flag
                days = 1825
            }
        }
    }
    on_accept = {
        clr_country_flag = vu_request_administrative_bureaucrats_for_adm_cooldown_flag #Don addition
        set_country_flag = vu_request_administrative_bureaucrats_for_adm_flag
        set_country_flag = vu_request_administrative_bureaucrats_for_adm_cooldown_flag #Don addition
        clr_country_flag = vu_request_diplomatic_envoys_for_dip_flag
        clr_country_flag = vu_request_military_attaches_for_mil_flag
        FROM = {
            add_adm_power = -25
            add_treasury = -10   #State paid transportation fees for the Bureaucrats.
            add_favors = {
                who = ROOT
                amount = 10
            }
        }
        add_adm_power = 25
        add_trust = {
            who = FROM
            value = 5
        }
        add_favors = {
            who = ROOT
            amount = -10
        }
        add_opinion = {
            who = FROM
            modifier = sought_25_bureaucratic_adm_points
        }
    }
    on_decline = {
        add_prestige = -10
        add_treasury = 10
    }

    ai_acceptance = {
        add_entry = {
            name = Don_is_a_TWAT

            # Restricts this entry to the countries that validate the triggers. Optional.
            #limit = {
            #    always = yes
            #}

            export_to_variable = {
                variable_name = ai_value
                value = modifier:diplomatic_reputation
                who = FROM
                with = THIS
            }

            # You can then change ai_value with effects such as multiply_variable, etc
        }
    }

    ai_will_do = { #Ai stuff by DonBrom
        #FROM = {
        #   alliance_with = ROOT
        #	trust = {
        #		who = ROOT
        #		value = 70
        #	}
        #	has_opinion = {
        #		who = ROOT
        #		value = 150
        #	}
        #	treasury = 250
        #	is_at_war = no
        #	has_any_disaster = no
        #	is_in_deficit = no
        #	is_month = 11 #Don's a genius and I love it! December = Winter is coming. :P
        #	adm_power = 750
        #	is_great_power = yes #Another Don addition - If you're a shitty tag then forget it! xD
        #}
        #is_subject = no #Another Don addition - Subjects don't get it! xD
        #is_great_power = no # xD
        #OR = {
        #	is_at_war = yes
        #	has_any_disaster = yes
        #}
    }
}

vu_request_diplomatic_envoys_for_DIP = {
    category = economy

    require_acceptance = yes #Set to no so that this is a player to player and or ai interaction. - SF

    is_visible = {
        ROOT = {
            ai = no
        }
    }
    is_allowed = {
        FROM = { #This is for receiving
            dip_power = 25
            diplomatic_reputation = 1 #Prussia contribution - SF
            has_opinion = { #This is opinion of receiver towards sender
                who = ROOT
                value = 25
            }
        }
        ROOT = {
            owes_favors = {
                who = FROM
                value = 10
            }
        }
        NOT = { #Don addition
            has_country_flag = vu_request_diplomatic_envoys_for_dip_flag
        }
        if = { #Don addition
            limit = {
                has_country_flag = vu_request_diplomatic_envoys_for_dip_cooldown_flag
            }
            had_country_flag = { #Is the effect
                flag = vu_request_diplomatic_envoys_for_dip_cooldown_flag
                days = 1825
            }
        }
    }
    on_accept = {
        clr_country_flag = vu_request_diplomatic_envoys_for_dip_cooldown_flag #Don addition
        set_country_flag = vu_request_diplomatic_envoys_for_dip_flag
        set_country_flag = vu_request_diplomatic_envoys_for_dip_cooldown_flag #Don addition
        clr_country_flag = vu_request_administrative_bureaucrats_for_adm_flag
        clr_country_flag = vu_request_military_attaches_for_mil_flag
        FROM = {
            add_dip_power = -25
            add_treasury = -10   #State paid transportation fees for the Envoys.
            add_favors = {
                who = ROOT
                amount = 10
            }
        }
        add_dip_power = 25
        add_trust = {
            who = FROM
            value = 5
        }
        add_favors = {
            who = ROOT
            amount = -10
        }
        add_opinion = {
            who = FROM
            modifier = sought_25_diplomatic_dip_points
        }
    }
    on_decline = {
        add_prestige = -10
        add_treasury = -10
    }

    ai_acceptance = {
        add_entry = {
            name = Don_is_a_TWAT

            # Restricts this entry to the countries that validate the triggers. Optional.
            #limit = {
            #    always = yes
            #}

            export_to_variable = {
                variable_name = ai_value
                value = modifier:diplomatic_reputation
                who = FROM
                with = THIS
            }

            # You can then change ai_value with effects such as multiply_variable, etc
        }
    }

    ai_will_do = { #Ai stuff by DonBrom
        #FROM = {
        #   alliance_with = ROOT
        #	trust = {
        #		who = ROOT
        #		value = 70
        #	}
        #	has_opinion = {
        #		who = ROOT
        #		value = 150
        #	}
        #	treasury = 250
        #	is_at_war = no
        #	has_any_disaster = no
        #	is_in_deficit = no
        #	is_month = 11 #Don's a genius and I love it! December = Winter is coming. :P
        #	dip_power = 750
        #	is_great_power = yes #Another Don addition - If you're a shitty tag then forget it! xD
        #}
        #is_subject = no #Another Don addition - Subjects don't get it! xD
        #is_great_power = no # xD
        #OR = {
        #	is_at_war = yes
        #	has_any_disaster = yes
        #}
    }
}

vu_request_military_attaches_for_MIL = {
    category = economy

    require_acceptance = yes #Set to no so that this is a player to player and or ai interaction. - SF

    is_visible = {
        ROOT = {
            ai = no
        }
    }
    is_allowed = {
        FROM = { #This is for receiving
            mil_power = 25
            OR = {
                army_tradition = 10 #Prussia contribution - SF
                navy_tradition = 10 #Prussia contribution - SF
            }
            has_opinion = { #This is opinion of receiver towards sender
                who = ROOT
                value = 25
            }
        }
        ROOT = {
            owes_favors = {
                who = FROM
                value = 10
            }
        }
        NOT = { #Don addition
            has_country_flag = vu_request_military_attaches_for_mil_flag
        }
        if = { #Don addition
            limit = {
                has_country_flag = vu_request_military_attaches_for_mil_cooldown_flag
            }
            had_country_flag = { #Is the effect
                flag = vu_request_military_attaches_for_mil_cooldown_flag
                days = 1825
            }
        }
    }
    on_accept = {
        clr_country_flag = vu_request_military_attaches_for_mil_cooldown_flag #Don addition
        set_country_flag = vu_request_military_attaches_for_mil_flag
        set_country_flag = vu_request_military_attaches_for_mil_cooldown_flag #Don addition
        clr_country_flag = vu_request_administrative_bureaucrats_for_adm_flag
        clr_country_flag = vu_request_diplomatic_envoys_for_dip_flag
        FROM = {
            add_mil_power = -25
            add_treasury = -10   #State paid transportation fees for the Envoys.
            add_favors = {
                who = ROOT
                amount = 10
            }
        }
        add_dip_power = 25
        add_trust = {
            who = FROM
            value = 5
        }
        add_favors = {
            who = ROOT
            amount = -10
        }
        add_opinion = {
            who = FROM
            modifier = sought_25_military_mil_points
        }
    }
    on_decline = {
        add_prestige = -10
        add_treasury = -10
    }

    ai_acceptance = {
        add_entry = {
            name = Don_is_a_TWAT

            # Restricts this entry to the countries that validate the triggers. Optional.
            #limit = {
            #    always = yes
            #}

            export_to_variable = {
                variable_name = ai_value
                value = modifier:diplomatic_reputation
                who = FROM
                with = THIS
            }

            # You can then change ai_value with effects such as multiply_variable, etc
        }
    }

    ai_will_do = {
    }
}
#Same dip actions, just fixed up to not be 42 THOUSAND lines long...
#########################################################################################
#   vu_promote_vassal_to_lordship                                                       #
#########################################################################################
vu_promote_vassal_to_lordship = {
    category = influence
    alert_index = 6
    alert_tooltip = promote_vassal_to_anglois_lordship_alert_tooltip

    is_visible = {
        #Checks if the overlord has access to the appropriate subject types
        has_vu_ToR_subjects = yes
        ToR_subject_limit_reached = no
        government_rank = 2
        FROM = {
            #FROM has to be a subject of Root, a vassal specifically, and also has to be a monarchy
            #(you can't make a republic or a theocracy into a Lordship you dummy)
            is_subject_of = ROOT
            is_subject_of_type = vassal
            government = monarchy
        }
    }

    is_allowed = {
        if = {
            #Limited that the vassal has less than 50 liberty desire
            limit = {
                FROM = {
                    liberty_desire = 50
                }
            }
            custom_trigger_tooltip = {
                tooltip = FROM_IS_REBELLIOUS_TT
                FROM = {
                    liberty_desire = 50
                }
            }
        }
    }

    on_accept = {
        #Made a scripted effect for this, to make this a bit less long and
        #also to make it a bit more efficient as we can re-use these later on
        vu_create_ToR_lordship = yes
        FROM = {
            #adding the gov reform for the apropriate rank...
            #might make it a scripted effect if we make more unique ones
            add_government_reform = eue_lordship_reform
            #Adding this in preparation for the optional colouring in
            if = {
                limit = {
                    OR = {
                        has_global_flag = vu_uncoloured_subjects_global
                        ROOT = {
                            has_country_flag = vu_uncoloured_subjects_overlord
                        }
                        has_country_flag = vu_uncoloured_subjects_subject
                    }
                }
                change_country_color = {
                    country = ROOT
                }
                set_country_flag = has_overriden_color_flag
            }
        }
    }

    ai_will_do = {
        always = no	#Keeping the AI off this for now, can't be bothered teaching it what to do
    }
}
#########################################################################################
#   vu_promote_vassal_to_barony                                                         #
#########################################################################################
vu_promote_vassal_to_barony = {
    category = influence
    alert_index = 6
    alert_tooltip = promote_vassal_to_anglois_lordship_alert_tooltip

    is_visible = {
        #Checks if the overlord has access to the appropriate subject types
        has_vu_ToR_subjects = yes
        ToR_subject_limit_reached = no
        government_rank = 3
        FROM = {
            #FROM has to be a subject of Root, a vassal specifically, and also has to be a monarchy
            #(you can't make a republic or a theocracy into a Lordship you dummy)
            is_subject_of = ROOT
            is_subject_of_type = vassal
            government = monarchy
        }
    }

    is_allowed = {
        if = {
            #Limited that the vassal has less than 50 liberty desire
            limit = {
                FROM = {
                    liberty_desire = 50
                }
            }
            custom_trigger_tooltip = {
                tooltip = FROM_IS_REBELLIOUS_TT
                FROM = {
                    liberty_desire = 50
                }
            }
        }
    }

    on_accept = {
        #Made a scripted effect for this, to make this a bit less long and
        #also to make it a bit more efficient as we can re-use these later on
        vu_create_ToR_barony = yes
        FROM = {
            #adding the gov reform for the apropriate rank...
            #might make it a scripted effect if we make more unique ones
            add_government_reform = eue_barony_reform
            #Adding this in preparation for the optional colouring in
            if = {
                limit = {
                    OR = {
                        has_global_flag = vu_uncoloured_subjects_global
                        ROOT = {
                            has_country_flag = vu_uncoloured_subjects_overlord
                        }
                        has_country_flag = vu_uncoloured_subjects_subject
                    }
                }
                change_country_color = {
                    country = ROOT
                }
                set_country_flag = has_overriden_color_flag
            }
        }
    }

    ai_will_do = {
        always = no	#Keeping the AI off this for now, can't be bothered teaching it what to do
    }
}
#########################################################################################
#   vu_promote_vassal_to_viscounty                                                      #
#########################################################################################
vu_promote_vassal_to_viscounty = {
    category = influence
    alert_index = 6
    alert_tooltip = promote_vassal_to_anglois_lordship_alert_tooltip

    is_visible = {
        #Checks if the overlord has access to the appropriate subject types
        has_vu_ToR_subjects = yes
        ToR_subject_limit_reached = no
        government_rank = 4
        FROM = {
            #FROM has to be a subject of Root, a vassal specifically, and also has to be a monarchy
            #(you can't make a republic or a theocracy into a Lordship you dummy)
            is_subject_of = ROOT
            is_subject_of_type = vassal
            government = monarchy
        }
    }

    is_allowed = {
        if = {
            #Limited that the vassal has less than 50 liberty desire
            limit = {
                FROM = {
                    liberty_desire = 50
                }
            }
            custom_trigger_tooltip = {
                tooltip = FROM_IS_REBELLIOUS_TT
                FROM = {
                    liberty_desire = 50
                }
            }
        }
    }

    on_accept = {
        #Made a scripted effect for this, to make this a bit less long and
        #also to make it a bit more efficient as we can re-use these later on
        vu_create_ToR_viscounty = yes
        FROM = {
            #adding the gov reform for the apropriate rank...
            #might make it a scripted effect if we make more unique ones
            add_government_reform = eue_viscounty_reform
            #Adding this in preparation for the optional colouring in
            if = {
                limit = {
                    OR = {
                        has_global_flag = vu_uncoloured_subjects_global
                        ROOT = {
                            has_country_flag = vu_uncoloured_subjects_overlord
                        }
                        has_country_flag = vu_uncoloured_subjects_subject
                    }
                }
                change_country_color = {
                    country = ROOT
                }
                set_country_flag = has_overriden_color_flag
            }
        }
    }

    ai_will_do = {
        always = no	#Keeping the AI off this for now, can't be bothered teaching it what to do
    }
}
#########################################################################################
#   vu_promote_vassal_to_marquisate                                                     #
#########################################################################################
vu_promote_vassal_to_marquisate = {
    category = influence
    alert_index = 6
    alert_tooltip = promote_vassal_to_anglois_lordship_alert_tooltip

    is_visible = {
        #Checks if the overlord has access to the appropriate subject types
        has_vu_ToR_subjects = yes
        ToR_subject_limit_reached = no
        government_rank = 6
        FROM = {
            #FROM has to be a subject of Root, a vassal specifically, and also has to be a monarchy
            #(you can't make a republic or a theocracy into a Lordship you dummy)
            is_subject_of = ROOT
            is_subject_of_type = vassal
            government = monarchy
        }
    }

    is_allowed = {
        if = {
            #Limited that the vassal has less than 50 liberty desire
            limit = {
                FROM = {
                    liberty_desire = 50
                }
            }
            custom_trigger_tooltip = {
                tooltip = FROM_IS_REBELLIOUS_TT
                FROM = {
                    liberty_desire = 50
                }
            }
        }
    }

    on_accept = {
        #Made a scripted effect for this, to make this a bit less long and
        #also to make it a bit more efficient as we can re-use these later on
        vu_create_ToR_marquisate = yes
        FROM = {
            #adding the gov reform for the apropriate rank...
            #might make it a scripted effect if we make more unique ones
            add_government_reform = eue_marquisate_reform
            #Adding this in preparation for the optional colouring in
            if = {
                limit = {
                    OR = {
                        has_global_flag = vu_uncoloured_subjects_global
                        ROOT = {
                            has_country_flag = vu_uncoloured_subjects_overlord
                        }
                        has_country_flag = vu_uncoloured_subjects_subject
                    }
                }
                change_country_color = {
                    country = ROOT
                }
                set_country_flag = has_overriden_color_flag
            }
        }
    }

    ai_will_do = {
        always = no	#Keeping the AI off this for now, can't be bothered teaching it what to do
    }
}
#########################################################################################
#   vu_rein_in_lordship_to_barony                                                       #
#########################################################################################
vu_rein_in_lordship_to_barony = {
    category = influence
    alert_index = 6
    alert_tooltip = promote_vassal_to_anglois_lordship_alert_tooltip

    is_visible = {
        #Checks if the overlord has access to the appropriate subject types
        has_vu_ToR_subjects = yes
        government_rank = 3
        FROM = {
            #FROM has to be a subject of Root, a vassal specifically, and also has to be a monarchy
            #(you can't make a republic or a theocracy into a Lordship you dummy)
            is_subject_of = ROOT
            is_lordship_subject_type = yes
        }
    }

    is_allowed = {
        FROM = {
            #checking for dev requirement
            total_development = 10
            #cannot be disloyal
            NOT = {
                liberty_desire = 50
            }
            is_lordship_subject_type = yes
        }
    }

    on_accept = {
        #Made a scripted effect for this, to make this a bit less long and
        #also to make it a bit more efficient as we can re-use these later on
        vu_create_ToR_barony = yes
        FROM = {
            #adding the gov reform for the apropriate rank...
            #might make it a scripted effect if we make more unique ones
            add_government_reform = eue_barony_reform
            #Adding this in preparation for the optional colouring in
            if = {
                limit = {
                    OR = {
                        has_global_flag = vu_uncoloured_subjects_global
                        ROOT = {
                            has_country_flag = vu_uncoloured_subjects_overlord
                        }
                        has_country_flag = vu_uncoloured_subjects_subject
                    }
                }
                change_country_color = {
                    country = ROOT
                }
                set_country_flag = has_overriden_color_flag
            }
        }
    }

    ai_will_do = {
        always = no	#Keeping the AI off this for now, can't be bothered teaching it what to do
    }
}
#########################################################################################
#   vu_rein_in_barony_to_viscounty                                                      #
#########################################################################################
vu_rein_in_barony_to_viscounty = {
    category = influence
    alert_index = 6
    alert_tooltip = promote_vassal_to_anglois_lordship_alert_tooltip

    is_visible = {
        #Checks if the overlord has access to the appropriate subject types
        has_vu_ToR_subjects = yes
        government_rank = 4
        FROM = {
            #FROM has to be a subject of Root, a vassal specifically, and also has to be a monarchy
            #(you can't make a republic or a theocracy into a Lordship you dummy)
            is_subject_of = ROOT
            is_barony_subject_type = yes
        }
    }

    is_allowed = {
        FROM = {
            #checking for dev requirement
            total_development = 15
            #cannot be disloyal
            NOT = {
                liberty_desire = 50
            }
            is_barony_subject_type = yes
        }

    }

    on_accept = {
        #Made a scripted effect for this, to make this a bit less long and
        #also to make it a bit more efficient as we can re-use these later on
        vu_create_ToR_viscounty = yes
        FROM = {
            #adding the gov reform for the apropriate rank...
            #might make it a scripted effect if we make more unique ones
            add_government_reform = eue_viscounty_reform
            #Adding this in preparation for the optional colouring in
            if = {
                limit = {
                    OR = {
                        has_global_flag = vu_uncoloured_subjects_global
                        ROOT = {
                            has_country_flag = vu_uncoloured_subjects_overlord
                        }
                        has_country_flag = vu_uncoloured_subjects_subject
                    }
                }
                change_country_color = {
                    country = ROOT
                }
                set_country_flag = has_overriden_color_flag
            }
        }
    }

    ai_will_do = {
        always = no	#Keeping the AI off this for now, can't be bothered teaching it what to do
    }
}
#########################################################################################
#   vu_rein_in_viscounty_to_county                                                      #
#########################################################################################
vu_rein_in_viscounty_to_county = {
    category = influence
    alert_index = 6
    alert_tooltip = promote_vassal_to_anglois_lordship_alert_tooltip

    is_visible = {
        #Checks if the overlord has access to the appropriate subject types
        has_vu_ToR_subjects = yes
        government_rank = 5
        FROM = {
            #FROM has to be a subject of Root, a vassal specifically, and also has to be a monarchy
            #(you can't make a republic or a theocracy into a Lordship you dummy)
            is_subject_of = ROOT
            is_viscounty_subject_type = yes
        }
    }

    is_allowed = {
        FROM = {
            #checking for dev requirement
            total_development = 20
            #cannot be disloyal
            NOT = {
                liberty_desire = 50
            }
            is_viscounty_subject_type = yes
        }

    }

    on_accept = {
        #Made a scripted effect for this, to make this a bit less long and
        #also to make it a bit more efficient as we can re-use these later on
        vu_create_ToR_county = yes
        FROM = {
            #adding the gov reform for the apropriate rank...
            #might make it a scripted effect if we make more unique ones
            add_government_reform = eue_county_reform
            #Adding this in preparation for the optional colouring in
            if = {
                limit = {
                    OR = {
                        has_global_flag = vu_uncoloured_subjects_global
                        ROOT = {
                            has_country_flag = vu_uncoloured_subjects_overlord
                        }
                        has_country_flag = vu_uncoloured_subjects_subject
                    }
                }
                change_country_color = {
                    country = ROOT
                }
                set_country_flag = has_overriden_color_flag
            }
        }
    }

    ai_will_do = {
        always = no	#Keeping the AI off this for now, can't be bothered teaching it what to do
    }
}
#########################################################################################
#   vu_rein_in_county_to_marquisate                                                     #
#########################################################################################
vu_rein_in_county_to_marquisate = {
    category = influence
    alert_index = 6
    alert_tooltip = promote_vassal_to_anglois_lordship_alert_tooltip

    is_visible = {
        #Checks if the overlord has access to the appropriate subject types
        has_vu_ToR_subjects = yes
        government_rank = 6
        FROM = {
            #FROM has to be a subject of Root, a vassal specifically, and also has to be a monarchy
            #(you can't make a republic or a theocracy into a Lordship you dummy)
            is_subject_of = ROOT
            is_county_subject_type = yes
        }
    }

    is_allowed = {
        FROM = {
            #checking for dev requirement
            total_development = 30
            #cannot be disloyal
            NOT = {
                liberty_desire = 50
            }
            is_county_subject_type = yes
        }

    }

    on_accept = {
        #Made a scripted effect for this, to make this a bit less long and
        #also to make it a bit more efficient as we can re-use these later on
        vu_create_ToR_marquisate = yes
        FROM = {
            #adding the gov reform for the apropriate rank...
            #might make it a scripted effect if we make more unique ones
            add_government_reform = eue_marquisate_reform
            #Adding this in preparation for the optional colouring in
            if = {
                limit = {
                    OR = {
                        has_global_flag = vu_uncoloured_subjects_global
                        ROOT = {
                            has_country_flag = vu_uncoloured_subjects_overlord
                        }
                        has_country_flag = vu_uncoloured_subjects_subject
                    }
                }
                change_country_color = {
                    country = ROOT
                }
                set_country_flag = has_overriden_color_flag
            }
        }
    }

    ai_will_do = {
        always = no	#Keeping the AI off this for now, can't be bothered teaching it what to do
    }
}
#########################################################################################
#   vu_rein_in_marquisate_to_duchy                                                      #
#########################################################################################
vu_rein_in_marquisate_to_duchy = {
    category = influence
    alert_index = 6
    alert_tooltip = promote_vassal_to_anglois_lordship_alert_tooltip

    is_visible = {
        #Checks if the overlord has access to the appropriate subject types
        has_vu_ToR_subjects = yes
        government_rank = 7
        FROM = {
            #FROM has to be a subject of Root, a vassal specifically, and also has to be a monarchy
            #(you can't make a republic or a theocracy into a Lordship you dummy)
            is_subject_of = ROOT
            is_marquisate_subject_type = yes
        }
    }

    is_allowed = {
        FROM = {
            #checking for dev requirement
            total_development = 40
            #cannot be disloyal
            NOT = {
                liberty_desire = 50
            }
            is_marquisate_subject_type = yes
        }

    }

    on_accept = {
        #Made a scripted effect for this, to make this a bit less long and
        #also to make it a bit more efficient as we can re-use these later on
        vu_create_ToR_duchy = yes
        FROM = {
            #adding the gov reform for the apropriate rank...
            #might make it a scripted effect if we make more unique ones
            add_government_reform = eue_duchy_reform
            #Adding this in preparation for the optional colouring in
            if = {
                limit = {
                    OR = {
                        has_global_flag = vu_uncoloured_subjects_global
                        ROOT = {
                            has_country_flag = vu_uncoloured_subjects_overlord
                        }
                        has_country_flag = vu_uncoloured_subjects_subject
                    }
                }
                change_country_color = {
                    country = ROOT
                }
                set_country_flag = has_overriden_color_flag
            }
        }
    }

    ai_will_do = {
        always = no	#Keeping the AI off this for now, can't be bothered teaching it what to do
    }
}
#########################################################################################
#   vu_rein_in_duchy_to_principality                                                    #
#########################################################################################
vu_rein_in_duchy_to_principality = {
    category = influence
    alert_index = 6
    alert_tooltip = promote_vassal_to_anglois_lordship_alert_tooltip

    is_visible = {
        #Checks if the overlord has access to the appropriate subject types
        has_vu_ToR_subjects = yes
        government_rank = 8
        FROM = {
            #FROM has to be a subject of Root, a vassal specifically, and also has to be a monarchy
            #(you can't make a republic or a theocracy into a Lordship you dummy)
            is_subject_of = ROOT
            is_duchy_subject_type = yes
        }
    }

    is_allowed = {
        FROM = {
            #checking for dev requirement
            total_development = 75
            #cannot be disloyal
            NOT = {
                liberty_desire = 50
            }
            is_duchy_subject_type = yes
        }

    }

    on_accept = {
        #Made a scripted effect for this, to make this a bit less long and
        #also to make it a bit more efficient as we can re-use these later on
        vu_create_ToR_principality = yes
        FROM = {
            #adding the gov reform for the apropriate rank...
            #might make it a scripted effect if we make more unique ones
            add_government_reform = eue_principality_reform
            #Adding this in preparation for the optional colouring in
            if = {
                limit = {
                    OR = {
                        has_global_flag = vu_uncoloured_subjects_global
                        ROOT = {
                            has_country_flag = vu_uncoloured_subjects_overlord
                        }
                        has_country_flag = vu_uncoloured_subjects_subject
                    }
                }
                change_country_color = {
                    country = ROOT
                }
                set_country_flag = has_overriden_color_flag
            }
        }
    }

    ai_will_do = {
        always = no	#Keeping the AI off this for now, can't be bothered teaching it what to do
    }
}
#########################################################################################
#   vu_rein_in_principality_to_kingdom                                                    #
#########################################################################################
vu_rein_in_principality_to_kingdom = {
    category = influence
    alert_index = 6
    alert_tooltip = promote_vassal_to_anglois_lordship_alert_tooltip

    is_visible = {
        #Checks if the overlord has access to the appropriate subject types
        has_vu_ToR_subjects = yes
        government_rank = 9
        FROM = {
            #FROM has to be a subject of Root, a vassal specifically, and also has to be a monarchy
            #(you can't make a republic or a theocracy into a Lordship you dummy)
            is_subject_of = ROOT
            is_principality_subject_type = yes
        }
    }

    is_allowed = {
        FROM = {
            #checking for dev requirement
            total_development = 100
            #cannot be disloyal
            NOT = {
                liberty_desire = 50
            }
            is_principality_subject_type = yes
        }

    }

    on_accept = {
        #Made a scripted effect for this, to make this a bit less long and
        #also to make it a bit more efficient as we can re-use these later on
        vu_create_ToR_kingdom = yes
        FROM = {
            #adding the gov reform for the apropriate rank...
            #might make it a scripted effect if we make more unique ones
            add_government_reform = eue_kingdom_reform
            #Adding this in preparation for the optional colouring in
            if = {
                limit = {
                    OR = {
                        has_global_flag = vu_uncoloured_subjects_global
                        ROOT = {
                            has_country_flag = vu_uncoloured_subjects_overlord
                        }
                        has_country_flag = vu_uncoloured_subjects_subject
                    }
                }
                change_country_color = {
                    country = ROOT
                }
                set_country_flag = has_overriden_color_flag
            }
        }
    }

    ai_will_do = {
        always = no	#Keeping the AI off this for now, can't be bothered teaching it what to do
    }
}
###################################################################################################
###################################################################################################
####                        MUSLIM SUBJECTS BEYOND THIS POINT                                  ####
###################################################################################################
###################################################################################################


#########################################################################################
#   vu_promote_vassal_to_imamate                                                       #
#########################################################################################
vu_promote_vassal_to_imamate = {
    category = influence
    alert_index = 6
    alert_tooltip = promote_vassal_to_anglois_lordship_alert_tooltip

    is_visible = {
        #Checks if the overlord has access to the appropriate subject types
        religion_group = muslim
        ToR_Muslim_subject_limit_reached = no
        government_rank = 2
        FROM = {
            #FROM has to be a subject of Root, a vassal specifically, and also has to be a monarchy
            #(you can't make a republic or a theocracy into a Lordship you dummy)
            is_subject_of = ROOT
            is_subject_of_type = vassal
            government = monarchy
        }
    }

    is_allowed = {
        if = {
            #Limited that the vassal has less than 50 liberty desire
            limit = {
                FROM = {
                    liberty_desire = 50
                }
            }
            custom_trigger_tooltip = {
                tooltip = FROM_IS_REBELLIOUS_TT
                FROM = {
                    liberty_desire = 50
                }
            }
        }
    }

    on_accept = {
        #Made a scripted effect for this, to make this a bit less long and
        #also to make it a bit more efficient as we can re-use these later on
        create_subject = {
            subject_type = islamic_imamate
            subject = FROM
            keep_liberty_desire = yes
        }
        FROM = {
            #adding the gov reform for the apropriate rank...
            #might make it a scripted effect if we make more unique ones
            add_government_reform = islamic_imamate_reform
            change_religion = ROOT
            #Adding this in preparation for the optional colouring in
            if = {
                limit = {
                    OR = {
                        has_global_flag = vu_uncoloured_subjects_global
                        ROOT = {
                            has_country_flag = vu_uncoloured_subjects_overlord
                        }
                        has_country_flag = vu_uncoloured_subjects_subject
                    }
                }
                change_country_color = {
                    country = ROOT
                }
                set_country_flag = has_overriden_color_flag
            }
        }
    }

    ai_will_do = {
        always = no	#Keeping the AI off this for now, can't be bothered teaching it what to do
    }
}
#########################################################################################
#   vu_promote_vassal_to_grand_muftate                                                  #
#########################################################################################
vu_promote_vassal_to_grand_muftate = {
    category = influence
    alert_index = 6
    alert_tooltip = promote_vassal_to_anglois_lordship_alert_tooltip

    is_visible = {
        #Checks if the overlord has access to the appropriate subject types
        religion_group = muslim
        ToR_Muslim_subject_limit_reached = no
        government_rank = 3
        FROM = {
            #FROM has to be a subject of Root, a vassal specifically, and also has to be a monarchy
            #(you can't make a republic or a theocracy into a Lordship you dummy)
            is_subject_of = ROOT
            is_subject_of_type = vassal
            government = monarchy
        }
    }

    is_allowed = {
        if = {
            #Limited that the vassal has less than 50 liberty desire
            limit = {
                FROM = {
                    liberty_desire = 50
                }
            }
            custom_trigger_tooltip = {
                tooltip = FROM_IS_REBELLIOUS_TT
                FROM = {
                    liberty_desire = 50
                }
            }
        }
    }

    on_accept = {
        #Made a scripted effect for this, to make this a bit less long and
        #also to make it a bit more efficient as we can re-use these later on
        create_subject = {
            subject_type = islamic_grand_muftate
            subject = FROM
            keep_liberty_desire = yes
        }
        FROM = {
            #adding the gov reform for the apropriate rank...
            #might make it a scripted effect if we make more unique ones
            add_government_reform = islamic_grand_muftate_reform
            change_religion = ROOT
            #Adding this in preparation for the optional colouring in
            if = {
                limit = {
                    OR = {
                        has_global_flag = vu_uncoloured_subjects_global
                        ROOT = {
                            has_country_flag = vu_uncoloured_subjects_overlord
                        }
                        has_country_flag = vu_uncoloured_subjects_subject
                    }
                }
                change_country_color = {
                    country = ROOT
                }
                set_country_flag = has_overriden_color_flag
            }
        }
    }

    ai_will_do = {
        always = no	#Keeping the AI off this for now, can't be bothered teaching it what to do
    }
}
#########################################################################################
#   vu_promote_vassal_to_sheikdom                                                       #
#########################################################################################
vu_promote_vassal_to_sheikdom = {
    category = influence
    alert_index = 6
    alert_tooltip = promote_vassal_to_anglois_lordship_alert_tooltip

    is_visible = {
        #Checks if the overlord has access to the appropriate subject types
        religion_group = muslim
        ToR_Muslim_subject_limit_reached = no
        government_rank = 4
        FROM = {
            #FROM has to be a subject of Root, a vassal specifically, and also has to be a monarchy
            #(you can't make a republic or a theocracy into a Lordship you dummy)
            is_subject_of = ROOT
            is_subject_of_type = vassal
            government = monarchy
        }
    }

    is_allowed = {
        if = {
            #Limited that the vassal has less than 50 liberty desire
            limit = {
                FROM = {
                    liberty_desire = 50
                }
            }
            custom_trigger_tooltip = {
                tooltip = FROM_IS_REBELLIOUS_TT
                FROM = {
                    liberty_desire = 50
                }
            }
        }
    }

    on_accept = {
        #Made a scripted effect for this, to make this a bit less long and
        #also to make it a bit more efficient as we can re-use these later on
        create_subject = {
            subject_type = islamic_sheikdom
            subject = FROM
            keep_liberty_desire = yes
        }
        FROM = {
            #adding the gov reform for the apropriate rank...
            #might make it a scripted effect if we make more unique ones
            add_government_reform = islamic_sheikdom_reform
            change_religion = ROOT
            #Adding this in preparation for the optional colouring in
            if = {
                limit = {
                    OR = {
                        has_global_flag = vu_uncoloured_subjects_global
                        ROOT = {
                            has_country_flag = vu_uncoloured_subjects_overlord
                        }
                        has_country_flag = vu_uncoloured_subjects_subject
                    }
                }
                change_country_color = {
                    country = ROOT
                }
                set_country_flag = has_overriden_color_flag
            }
        }
    }

    ai_will_do = {
        always = no	#Keeping the AI off this for now, can't be bothered teaching it what to do
    }
}
#########################################################################################
#   vu_promote_vassal_to_emirate                                                        #
#########################################################################################
vu_promote_vassal_to_emirate = {
    category = influence
    alert_index = 6
    alert_tooltip = promote_vassal_to_anglois_lordship_alert_tooltip

    is_visible = {
        #Checks if the overlord has access to the appropriate subject types
        religion_group = muslim
        ToR_Muslim_subject_limit_reached = no
        government_rank = 6
        FROM = {
            #FROM has to be a subject of Root, a vassal specifically, and also has to be a monarchy
            #(you can't make a republic or a theocracy into a Lordship you dummy)
            is_subject_of = ROOT
            is_subject_of_type = vassal
            government = monarchy
        }
    }

    is_allowed = {
        if = {
            #Limited that the vassal has less than 50 liberty desire
            limit = {
                FROM = {
                    liberty_desire = 50
                }
            }
            custom_trigger_tooltip = {
                tooltip = FROM_IS_REBELLIOUS_TT
                FROM = {
                    liberty_desire = 50
                }
            }
        }
    }

    on_accept = {
        #Made a scripted effect for this, to make this a bit less long and
        #also to make it a bit more efficient as we can re-use these later on
        if = {
            limit = {
                OR = {
                    tag = MUG
                    tag = TIM
                    tag = YUA
                    religion = ibadi
                }
            }
            create_subject = {
                subject_type = islamic_governate
                subject = FROM
                keep_liberty_desire = yes
            }
            FROM = {
                add_government_reform = islamic_governate_reform
            }
        }
        else = {
            create_subject = {
                subject_type = islamic_emirate
                subject = FROM
                keep_liberty_desire = yes
            }
            FROM = {
                add_government_reform = islamic_emirate_reform
            }
        }

        FROM = {
            change_religion = ROOT
            set_dynasty = ROOT
            #Adding this in preparation for the optional colouring in
            if = {
                limit = {
                    OR = {
                        has_global_flag = vu_uncoloured_subjects_global
                        ROOT = {
                            has_country_flag = vu_uncoloured_subjects_overlord
                        }
                        has_country_flag = vu_uncoloured_subjects_subject
                    }
                }
                change_country_color = {
                    country = ROOT
                }
                set_country_flag = has_overriden_color_flag
            }
        }
    }

    ai_will_do = {
        always = no	#Keeping the AI off this for now, can't be bothered teaching it what to do
    }
}
#########################################################################################
#   vu_rein_in_imamate_to_grand_muftate                                                 #
#########################################################################################
vu_rein_in_imamate_to_grand_muftate = {
    category = influence
    alert_index = 6
    alert_tooltip = promote_vassal_to_anglois_lordship_alert_tooltip

    is_visible = {
        #Checks if the overlord has access to the appropriate subject types
        religion_group = muslim
        government_rank = 3
        FROM = {
            #FROM has to be a subject of Root, a vassal specifically, and also has to be a monarchy
            #(you can't make a republic or a theocracy into a Lordship you dummy)
            is_subject_of = ROOT
            is_subject_of_type = islamic_imamate
        }
    }

    is_allowed = {
        FROM = {
            #checking for dev requirement
            total_development = 10
            #cannot be disloyal
            NOT = {
                liberty_desire = 50
            }
        }
    }

    on_accept = {
        #Made a scripted effect for this, to make this a bit less long and
        #also to make it a bit more efficient as we can re-use these later on
        create_subject = {
            subject_type = islamic_grand_muftate
            who = FROM
            keep_liberty_desire = yes
        }
        FROM = {
            #adding the gov reform for the apropriate rank...
            #might make it a scripted effect if we make more unique ones
            add_government_reform = islamic_grand_muftate_reform
            #Adding this in preparation for the optional colouring in
            if = {
                limit = {
                    OR = {
                        has_global_flag = vu_uncoloured_subjects_global
                        ROOT = {
                            has_country_flag = vu_uncoloured_subjects_overlord
                        }
                        has_country_flag = vu_uncoloured_subjects_subject
                    }
                }
                change_country_color = {
                    country = ROOT
                }
                set_country_flag = has_overriden_color_flag
            }
        }
    }

    ai_will_do = {
        always = no	#Keeping the AI off this for now, can't be bothered teaching it what to do
    }
}
#########################################################################################
#   vu_rein_in_grand_muftate_to_sheikdom                                                #
#########################################################################################
vu_rein_in_grand_muftate_to_sheikdom = {
    category = influence
    alert_index = 6
    alert_tooltip = promote_vassal_to_anglois_lordship_alert_tooltip

    is_visible = {
        #Checks if the overlord has access to the appropriate subject types
        religion_group = muslim
        government_rank = 4
        FROM = {
            #FROM has to be a subject of Root, a vassal specifically, and also has to be a monarchy
            #(you can't make a republic or a theocracy into a Lordship you dummy)
            is_subject_of = ROOT
            is_subject_of_type = islamic_grand_muftate
        }
    }

    is_allowed = {
        FROM = {
            #checking for dev requirement
            total_development = 15
            #cannot be disloyal
            NOT = {
                liberty_desire = 50
            }
        }

    }

    on_accept = {
        #Made a scripted effect for this, to make this a bit less long and
        #also to make it a bit more efficient as we can re-use these later on
        vu_create_ToR_viscounty = yes
        FROM = {
            #adding the gov reform for the apropriate rank...
            #might make it a scripted effect if we make more unique ones
            add_government_reform = eue_viscounty_reform
            #Adding this in preparation for the optional colouring in
            if = {
                limit = {
                    OR = {
                        has_global_flag = vu_uncoloured_subjects_global
                        ROOT = {
                            has_country_flag = vu_uncoloured_subjects_overlord
                        }
                        has_country_flag = vu_uncoloured_subjects_subject
                    }
                }
                change_country_color = {
                    country = ROOT
                }
                set_country_flag = has_overriden_color_flag
            }
        }
    }

    ai_will_do = {
        always = no	#Keeping the AI off this for now, can't be bothered teaching it what to do
    }
}
#########################################################################################
#   vu_rein_in_sheikdom_to_sharifate                                                    #
#########################################################################################
vu_rein_in_sheikdom_to_sharifate = {
    category = influence
    alert_index = 6
    alert_tooltip = promote_vassal_to_anglois_lordship_alert_tooltip

    is_visible = {
        #Checks if the overlord has access to the appropriate subject types
        religion_group = muslim
        government_rank = 5
        FROM = {
            #FROM has to be a subject of Root, a vassal specifically, and also has to be a monarchy
            #(you can't make a republic or a theocracy into a Lordship you dummy)
            is_subject_of = ROOT
            is_subject_of_type = islamic_sheikdom
        }
    }

    is_allowed = {
        FROM = {
            #checking for dev requirement
            total_development = 20
            #cannot be disloyal
            NOT = {
                liberty_desire = 50
            }
        }
    }

    on_accept = {
        #Made a scripted effect for this, to make this a bit less long and
        #also to make it a bit more efficient as we can re-use these later on
        create_subject = {
            subject_type = islamic_sharifate
            who = FROM
            keep_liberty_desire = yes
        }
        FROM = {
            #adding the gov reform for the apropriate rank...
            #might make it a scripted effect if we make more unique ones
            add_government_reform = islamic_sharifate_reform
            #Adding this in preparation for the optional colouring in
            if = {
                limit = {
                    OR = {
                        has_global_flag = vu_uncoloured_subjects_global
                        ROOT = {
                            has_country_flag = vu_uncoloured_subjects_overlord
                        }
                        has_country_flag = vu_uncoloured_subjects_subject
                    }
                }
                change_country_color = {
                    country = ROOT
                }
                set_country_flag = has_overriden_color_flag
            }
        }
    }

    ai_will_do = {
        always = no	#Keeping the AI off this for now, can't be bothered teaching it what to do
    }
}
#########################################################################################
#   vu_rein_in_sharifate_to_emirate                                                     #
#########################################################################################
vu_rein_in_sharifate_to_emirate = {
    category = influence
    alert_index = 6
    alert_tooltip = promote_vassal_to_anglois_lordship_alert_tooltip

    is_visible = {
        #Checks if the overlord has access to the appropriate subject types
        religion_group = muslim
        government_rank = 6
        FROM = {
            #FROM has to be a subject of Root, a vassal specifically, and also has to be a monarchy
            #(you can't make a republic or a theocracy into a Lordship you dummy)
            is_subject_of = ROOT
            is_subject_of_type = islamic_sharifate
        }
    }

    is_allowed = {
        FROM = {
            #checking for dev requirement
            total_development = 30
            #cannot be disloyal
            NOT = {
                liberty_desire = 50
            }
        }

    }

    on_accept = {
        #Made a scripted effect for this, to make this a bit less long and
        #also to make it a bit more efficient as we can re-use these later on
        if = {
            limit = {
                OR = {
                    tag = MUG
                    tag = TIM
                    tag = YUA
                    religion = ibadi
                }
            }
            create_subject = {
                subject_type = islamic_governate
                subject = FROM
                keep_liberty_desire = yes
            }
            FROM = {
                add_government_reform = islamic_governate_reform
            }
        }
        else = {
            create_subject = {
                subject_type = islamic_emirate
                subject = FROM
                keep_liberty_desire = yes
            }
            FROM = {
                add_government_reform = islamic_emirate_reform
            }
        }
        FROM = {
            change_religion = ROOT
            set_dynasty = ROOT
            #Adding this in preparation for the optional colouring in
            if = {
                limit = {
                    OR = {
                        has_global_flag = vu_uncoloured_subjects_global
                        ROOT = {
                            has_country_flag = vu_uncoloured_subjects_overlord
                        }
                        has_country_flag = vu_uncoloured_subjects_subject
                    }
                }
                change_country_color = {
                    country = ROOT
                }
                set_country_flag = has_overriden_color_flag
            }
        }
    }

    ai_will_do = {
        always = no	#Keeping the AI off this for now, can't be bothered teaching it what to do
    }
}
#########################################################################################
#   vu_rein_in_emirate_to_sultanate                                                     #
#########################################################################################
vu_rein_in_emirate_to_sultanate = {
    category = influence
    alert_index = 6
    alert_tooltip = promote_vassal_to_anglois_lordship_alert_tooltip

    is_visible = {
        #Checks if the overlord has access to the appropriate subject types
        religion_group = muslim
        government_rank = 7
        FROM = {
            #FROM has to be a subject of Root, a vassal specifically, and also has to be a monarchy
            #(you can't make a republic or a theocracy into a Lordship you dummy)
            is_subject_of = ROOT
            OR = {
                is_subject_of_type = islamic_emirate
                is_subject_of_type = islamic_governate
            }
        }
    }

    is_allowed = {
        FROM = {
            #checking for dev requirement
            total_development = 40
            #cannot be disloyal
            NOT = {
                liberty_desire = 50
            }
        }
    }

    on_accept = {
        #Made a scripted effect for this, to make this a bit less long and
        #also to make it a bit more efficient as we can re-use these later on
        create_subject = {
            subject_type = islamic_sultanate
            who = FROM
            keep_liberty_desire = yes
        }
        FROM = {
            #adding the gov reform for the apropriate rank...
            #might make it a scripted effect if we make more unique ones
            add_government_reform = islamic_sultanate_reform
            #Adding this in preparation for the optional colouring in
            if = {
                limit = {
                    OR = {
                        has_global_flag = vu_uncoloured_subjects_global
                        ROOT = {
                            has_country_flag = vu_uncoloured_subjects_overlord
                        }
                        has_country_flag = vu_uncoloured_subjects_subject
                    }
                }
                change_country_color = {
                    country = ROOT
                }
                set_country_flag = has_overriden_color_flag
            }
        }
    }

    ai_will_do = {
        always = no	#Keeping the AI off this for now, can't be bothered teaching it what to do
    }
}
#########################################################################################
#   vu_rein_in_sultanate_to_taifa                                                       #
#########################################################################################
vu_rein_in_sultanate_to_taifa = {
    category = influence
    alert_index = 6
    alert_tooltip = promote_vassal_to_anglois_lordship_alert_tooltip

    is_visible = {
        #Checks if the overlord has access to the appropriate subject types
        religion_group = muslim
        government_rank = 8
        FROM = {
            #FROM has to be a subject of Root, a vassal specifically, and also has to be a monarchy
            #(you can't make a republic or a theocracy into a Lordship you dummy)
            is_subject_of = ROOT
            is_subject_of_type = islamic_sultanate
        }
    }

    is_allowed = {
        FROM = {
            #checking for dev requirement
            total_development = 75
            #cannot be disloyal
            NOT = {
                liberty_desire = 50
            }
        }

    }

    on_accept = {
        #Made a scripted effect for this, to make this a bit less long and
        #also to make it a bit more efficient as we can re-use these later on
        create_subject = {
            subject_type = islamic_taifa
            who = FROM
            keep_liberty_desire = yes
        }
        FROM = {
            #adding the gov reform for the apropriate rank...
            #might make it a scripted effect if we make more unique ones
            add_government_reform = islamic_taifa_reform
            #Adding this in preparation for the optional colouring in
            if = {
                limit = {
                    OR = {
                        has_global_flag = vu_uncoloured_subjects_global
                        ROOT = {
                            has_country_flag = vu_uncoloured_subjects_overlord
                        }
                        has_country_flag = vu_uncoloured_subjects_subject
                    }
                }
                change_country_color = {
                    country = ROOT
                }
                set_country_flag = has_overriden_color_flag
            }
        }
    }

    ai_will_do = {
        always = no	#Keeping the AI off this for now, can't be bothered teaching it what to do
    }
}
#########################################################################################
#   vu_rein_in_taifa_to_malikate                                                        #
#########################################################################################
vu_rein_in_taifa_to_malikate = {
    category = influence
    alert_index = 6
    alert_tooltip = promote_vassal_to_anglois_lordship_alert_tooltip

    is_visible = {
        #Checks if the overlord has access to the appropriate subject types
        religion_group = muslim
        government_rank = 9
        FROM = {
            #FROM has to be a subject of Root, a vassal specifically, and also has to be a monarchy
            #(you can't make a republic or a theocracy into a Lordship you dummy)
            is_subject_of = ROOT
            is_subject_of_type = islamic_taifa
        }
    }

    is_allowed = {
        FROM = {
            #checking for dev requirement
            total_development = 100
            #cannot be disloyal
            NOT = {
                liberty_desire = 50
            }
        }
    }
    on_accept = {
        #Made a scripted effect for this, to make this a bit less long and
        #also to make it a bit more efficient as we can re-use these later on
        create_subject = {
            subject_type = islamic_malikate
            who = FROM
            keep_liberty_desire = yes
        }
        FROM = {
            #adding the gov reform for the apropriate rank...
            #might make it a scripted effect if we make more unique ones
            add_government_reform = islamic_malikate_reform
            #Adding this in preparation for the optional colouring in
            if = {
                limit = {
                    OR = {
                        has_global_flag = vu_uncoloured_subjects_global
                        ROOT = {
                            has_country_flag = vu_uncoloured_subjects_overlord
                        }
                        has_country_flag = vu_uncoloured_subjects_subject
                    }
                }
                change_country_color = {
                    country = ROOT
                }
                set_country_flag = has_overriden_color_flag
            }
        }
    }

    ai_will_do = {
        always = no	#Keeping the AI off this for now, can't be bothered teaching it what to do
    }
}